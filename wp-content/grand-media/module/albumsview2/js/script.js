var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,n,v){l!=Array.prototype&&l!=Object.prototype&&(l[n]=v.value)};$jscomp.getGlobal=function(l){return"undefined"!=typeof window&&window===l?l:"undefined"!=typeof global&&null!=global?global:l};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(l,n,v,c){if(n){v=$jscomp.global;l=l.split(".");for(c=0;c<l.length-1;c++){var y=l[c];y in v||(v[y]={});v=v[y]}l=l[l.length-1];c=v[l];n=n(c);n!=c&&null!=n&&$jscomp.defineProperty(v,l,{configurable:!0,writable:!0,value:n})}};
$jscomp.polyfill("Math.hypot",function(l){return l?l:function(l,v,c){l=Number(l);v=Number(v);var n,q=Math.max(Math.abs(l),Math.abs(v));for(n=2;n<arguments.length;n++)q=Math.max(q,Math.abs(arguments[n]));if(1E100<q||1E-100>q){if(!q)return q;l/=q;v/=q;var C=l*l+v*v;for(n=2;n<arguments.length;n++){var B=Number(arguments[n])/q;C+=B*B}return Math.sqrt(C)*q}C=l*l+v*v;for(n=2;n<arguments.length;n++)B=Number(arguments[n]),C+=B*B;return Math.sqrt(C)}},"es6","es3");
$jscomp.arrayIteratorImpl=function(l){var n=0;return function(){return n<l.length?{done:!1,value:l[n++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var l=0;return function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+l++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.iterator;l||(l=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[l]&&$jscomp.defineProperty(Array.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.asyncIterator;l||(l=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(l){$jscomp.initSymbolIterator();l={next:l};l[$jscomp.global.Symbol.iterator]=function(){return this};return l};
$jscomp.iteratorFromArray=function(l,n){$jscomp.initSymbolIterator();l instanceof String&&(l+="");var v=0,c={next:function(){if(v<l.length){var y=v++;return{value:n(y,l[y]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};$jscomp.polyfill("Array.prototype.keys",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(l){return l})}},"es6","es3");
function codeasily_albumsView2_module(){function l(){this._listenerSet={}}function n(a,b,d){this.type=a;this.params=d;this.target=b}function v(a){var b=document.webkitIsFullScreen||document.mozFullScreen||!1;a.requestFullScreen=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||function(){return!1};document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||function(){return!1};b?document.cancelFullScreen():a.requestFullScreen()}
function c(a){return window[a]&&window[a].settings?window[a].settings:null}function y(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveListener",null,b)}catch(d){}return a}function q(){return navigator.maxTouchPoints||"ontouchstart"in window}function C(a){a=new Date(1E3*a);var b=new Date,d=new Date(Date.now()-864E5),e=a.getFullYear(),g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()],c=a.getDate(),h=a.getHours(),
m=a.getMinutes();return a.setHours(0,0,0,0)==b.setHours(0,0,0,0)?"Today, "+h+":"+m:a.setHours(0,0,0,0)==d.setHours(0,0,0,0)?"Yesterday, "+h+":"+m:e==b.getFullYear()?c+" "+g+", "+e:c+" "+g+" "+e}function B(a){for(var b=99999,d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1==e.nodeType&&"SCRIPT"!=e.nodeName)var g=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index");g>b&&"auto"!=g&&(b=parseInt(g))}return b}function ma(a){if("audio/mpeg"==a)return"audio";if("image"==a.split("/")[0])return"image"}
function V(a,b,d){function e(){var f=(new Date).getTime()-c,m=f/d;1>m?(m=1-g(m),a.style.opacity=String(m),setTimeout(e,Math.min(25,d-f))):(a.style.opacity="0",b&&b())}d||(d=500);var g=Math.sqrt,c=(new Date).getTime();e()}function L(a){var b=0,d=document.createElement("div");d.className="gmAlbumsViewFL_Preloader";var e=document.createElement("div");e.style.position="absolute";e.style.width="8px";e.style.height="8px";e.style.margin="-4px";e.style.left="50%";e.style.top="50%";e.style.borderRadius="50%";
e.style.backgroundColor=a;d.appendChild(e);e=document.createElement("div");e.className="c-spinner";e.style.position="absolute";e.style.transition="top 1s";e.style.width="36px";e.style.height="36px";e.style.margin="-18px";e.style.left="50%";e.style.top="50%";for(var g=0;8>g;g++){var c=document.createElement("div");c.style.position="absolute";c.style.top="50%";c.style.left="50%";c.style.marginTop="-4px";c.style.marginLeft="-4px";c.style.width="8px";c.style.height="8px";c.style.backgroundColor=a;c.style.borderRadius=
"100%";c.style.transform="rotate("+b+"deg) translate(18px)";b+=45;e.appendChild(c)}d.appendChild(e);return d}function G(a,b,d,e){this.x=a;this.y=b;this.width=d;this.height=e}function u(a,b){this.width=a;this.height=b}function t(a,b){this.x=a;this.y=b}function I(a,b,d,e,c,f){this.matrix=[[a,b,0],[d,e,0],[c,f,1]];return this}function D(a,b,d,e,c){this.matrix=new I(1,0,0,1,0,0);e=new I(1,0,0,1,e,c);a=new I(a,0,0,b,0,0);d=new I(Math.cos(d*Math.PI/180),Math.sin(d*Math.PI/180),-Math.sin(d*Math.PI/180),
Math.cos(d*Math.PI/180),0,0);this.matrix.multi(e).multi(a).multi(d);this.scaleX=Number(this.matrix.matrix[0][0].toFixed(2));this.skewY=Number(this.matrix.matrix[0][1].toFixed(2));this.skewX=Number(this.matrix.matrix[1][0].toFixed(2));this.scaleY=Number(this.matrix.matrix[1][1].toFixed(2));this.translateX=Number(this.matrix.matrix[2][0].toFixed(2));this.translateY=Number(this.matrix.matrix[2][1].toFixed(2))}function P(a){if(1==arguments.length)console.log(a);else{for(var b="",d=0;d<arguments.length;d++)b+=
arguments[d]+", ";b=b.slice(0,-2);console.log(b)}}function na(a){if({37:1,38:1,39:1,40:1}[a.keyCode])return E(a),!1}function E(a){a=a||window.event;a.preventDefault&&a.preventDefault();a.returnValue=!1}function p(a,b){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,f){return b+b+c+c+f+f});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+","+b+")":null}function M(a,b){for(var d in a)b[d]=a[d]}function W(a,
b,d,e){var c=a.width;a=a.height;var f=b.width;b=b.height;d?d=Math.max(f/c,b/a):(d=Math.min(f/c,b/a),d=1<d?1:d);var h=Math.round(c*d),m=Math.round(a*d),k=Math.round((f-h)/2),l=Math.round((b-m)/2);return e?new D(d,d,0,(f-c)/2,(b-a)/2):new G(k,l,h,m)}function oa(a){if(0!=a.length)for(var b=0;b<a.length;b++){var d=a[b].element;d&&(a[b].overflow?d.style.overflow=a[b].overflow:d.style.removeProperty("overflow"),a[b].height?d.style.height=a[b].height:d.style.removeProperty("height"))}}function Y(){window.addEventListener&&
(window.addEventListener("DOMMouseScroll",E,!1),window.addEventListener("touchmove",E,z));window.onwheel=E;window.onmousewheel=document.onmousewheel=E;document.onkeydown=na}function Z(){window.removeEventListener&&(window.removeEventListener("DOMMouseScroll",E,!1),window.removeEventListener("touchmove",E,z));window.onmousewheel=document.onmousewheel=null;window.onwheel=null;document.onkeydown=null}function J(a,b,d,e){var g=new XMLHttpRequest;g.open("POST",c(b.appName).appApi,!0);g.onreadystatechange=
function(){4==this.readyState&&(200!=this.status?d&&c(b.appName).appEventManager.dispatchGMEvent(new n(d,b,{error:this.statusText,params:e})):d&&c(b.appName).appEventManager.dispatchGMEvent(new n(d,b,{data:this.responseText,params:e})))};g.onerror=function(c){1==confirm("Failed to load resource: The network connection was lost. Let's try again?")&&J(a,b,d,e)};try{g.send(a),c(b.appName).appEventManager.dispatchGMEvent(new n(r.REQUEST_START,b,null))}catch(f){P(f)}}function Q(a,b){M(a,this);this.appName=
b;this.idPrefix=void 0;this.webImg=new Image;this.webImgFrame=new G(0,0,0,0);this.webImg.addEventListener("load",function(){this.classList.add("onLoad")},!1);if(this.link&&""!=this.link){a=this.link;var d;a.match(/youtu\.be/i)||a.match(/youtube\.com/i)?(b=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&\?]*).*/,(a=a.match(b))&&11==a[7].length&&(d=a[7]),void 0!==d&&(this.mime_type="video/youtube",this.videoId=d,this.link=void 0)):a.match(/vimeo\.com/i)&&(b=/(www\.)?vimeo.com\/(\d+)($|\/)/,
(a=a.match(b))&&(d=a[2]),void 0!==d&&(this.mime_type="video/vimeo",this.videoId=d,this.link=void 0))}"audio/mpeg"==this.mime_type&&(this.type="audio");"image"==this.mime_type.split("/")[0]&&(this.type="image");"video"==this.mime_type.split("/")[0]&&(this.type="video")}function F(a,b){M(a,this);this.appName=b;this.key=this.listIndex=void 0;this.meta&&(this.meta=new aa(this.meta,this.appName));"gmedia_tag"==this.taxonomy&&(this.name="#"+this.name);"myCollection"==this.taxonomy&&this._query&&(this.sharelink=
c(b).post_url+"/?"+c(b).galleryID+"[gmedia__in]="+this._query.gmedia__in)}function aa(a,b){M(a,this);this.appName=b;this._cover&&(this._cover=new Q(a._cover,this.appName))}function pa(a,b,d){this.appName=a;var e=this,g=0;a=document.createElement("div");a.className="gmAlbumsViewFL_ItemInfoBar";a.style.backgroundColor=c(this.appName).modalInfoBoxBgColor;if(!q()||q()&&N){var f=document.createElement("div");f.className="gmInfoBarCloseButton";f.innerHTML='<svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
f.childNodes[0].style.fill=p(c(this.appName).modalInfoBoxTitleTextColor,1);f.addEventListener("click",function(){b.prepareToRemove()},!1);a.appendChild(f)}var h='<span class="gmItemTitle" style="color: '+c(this.appName).modalInfoBoxTitleTextColor+'">'+d.title+"<br>";h=d.description&&""!=d.description?h+('<span class="gmItemDescription" style="color: '+c(this.appName).modalInfoBoxTextColor+'">'+d.description+"</span></span>"):h+"</span>";""!=h&&(f=document.createElement("div"),f.className="gmDescriptionWrap",
f.style.float="none",f.innerHTML=h,a.appendChild(f));if(c(this.appName).infoBarTermsEnable){f=function(a){if(!b.dragging){a=this.getAttribute("termId");var d=this.getAttribute("taxonomy");c(e.appName).appEventManager.dispatchGMEvent(new n(r.NEED_NEW_COLLECTION,e,{term_id:[a],taxonomy:d}))}};h=document.createElement("div");h.className="gmDescriptionWrap";h.style.float="none";h.style.minHeight="0";h.style.color=p(c(this.appName).modalInfoBoxTextColor,1);h.style.fontSize="100%";a.appendChild(h);if(d.albums&&
0<d.albums.length){var m=document.createElement("ul");g=document.createElement("li");g.className="termsTitle";g.innerHTML="Albums:";m.appendChild(g);m.className="terms_list";for(g=0;g<d.albums.length;g++){var k=document.createElement("li");k.className="gm_album";k.innerHTML=d.albums[g].name;k.style.color=c(this.appName).infoBarTermsTitleColor;k.style.backgroundColor=c(this.appName).infoBarTermsBackgroundColorAlbums;k.onmouseover=function(){this.style.color=c(e.appName).infoBarTermsBackgroundColorAlbums;
this.style.backgroundColor=c(e.appName).infoBarTermsTitleColor};k.onmouseout=function(){this.style.color=c(e.appName).infoBarTermsTitleColor;this.style.backgroundColor=c(e.appName).infoBarTermsBackgroundColorAlbums};k.setAttribute("termId",d.albums[g].term_id);k.setAttribute("taxonomy","album__in");k.addEventListener("mouseup",f,!1);q()&&k.addEventListener("touchend",f,!1);m.appendChild(k)}h.appendChild(m)}if(d.categories&&0<d.categories.length){m=document.createElement("ul");g=document.createElement("li");
g.className="termsTitle";g.innerHTML="Categories:";m.appendChild(g);m.className="terms_list";for(g=0;g<d.categories.length;g++)k=document.createElement("li"),k.className="gm_category",k.innerHTML=d.categories[g].title,k.style.color=c(this.appName).infoBarTermsTitleColor,k.style.backgroundColor=c(this.appName).infoBarTermsBackgroundColorCategories,k.onmouseover=function(){this.style.color=c(e.appName).infoBarTermsBackgroundColorCategories;this.style.backgroundColor=c(e.appName).infoBarTermsTitleColor},
k.onmouseout=function(){this.style.color=c(e.appName).infoBarTermsTitleColor;this.style.backgroundColor=c(e.appName).infoBarTermsBackgroundColorCategories},k.addEventListener("mouseup",f,!1),q()&&k.addEventListener("touchend",f,!1),k.setAttribute("termId",d.categories[g].term_id),k.setAttribute("taxonomy","category__in"),m.appendChild(k);h.appendChild(m)}if(d.tags&&0<d.tags.length){m=document.createElement("ul");g=document.createElement("li");g.className="termsTitle";g.innerHTML="Tags:";m.appendChild(g);
m.className="terms_list";for(g=0;g<d.tags.length;g++)k=document.createElement("li"),k.className="gm_tag",k.innerHTML=d.tags[g].name,k.style.color=c(this.appName).infoBarTermsTitleColor,k.style.backgroundColor=c(this.appName).infoBarTermsBackgroundColorTags,k.onmouseover=function(){this.style.color=c(e.appName).infoBarTermsBackgroundColorTags;this.style.backgroundColor=c(e.appName).infoBarTermsTitleColor},k.onmouseout=function(){this.style.color=c(e.appName).infoBarTermsTitleColor;this.style.backgroundColor=
c(e.appName).infoBarTermsBackgroundColorTags},k.addEventListener("mouseup",f,!1),q()&&k.addEventListener("touchend",f,!1),k.setAttribute("termId",d.tags[g].term_id),k.setAttribute("taxonomy","tag__in"),m.appendChild(k);h.appendChild(m)}}if(c(this.appName).infoBarExifEnable){h="";d.meta.data&&d.meta.data.model&&(h+="<span class=gmItemMetaExifValue>"+d.meta.data.model+"</span></br>");f=[];d.meta.data&&d.meta.data.focallength&&f.push("<span class=gmItemMetaExifValue>"+d.meta.data.focallength+"</span>");
d.meta.data&&d.meta.data.aperture&&f.push("<span class=gmItemMetaExifValue>"+d.meta.data.aperture+"</span>");d.meta.data&&d.meta.data.exposure&&f.push("<span class=gmItemMetaExifValue>"+d.meta.data.exposure+"</span>");d.meta.data&&d.meta.data.iso&&f.push("<span class=gmItemMetaExifValue>ISO "+d.meta.data.iso+"</span>");for(g=0;g<f.length;g++)h+=f[g],g<f.length-1&&(h+='<span class="gmItemMetaExifSeparator"> / </span>');""!=h&&(f=document.createElement("div"),f.className="gmDescriptionWrap",f.style.color=
p(c(this.appName).modalInfoBoxTextColor,1),f.style.fontSize="100%",f.innerHTML=h,a.appendChild(f))}c(this.appName).infoBarCountersEnable&&(f=document.createElement("div"),f.className="gmDescriptionWrap",f.style.color=p(c(this.appName).modalInfoBoxTextColor,1),f.style.fontSize="100%",h=document.createElement("div"),h.className="likesViewCom",h.innerHTML='<svg version="1.1" viewBox="0 0 100 56" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M50,0C17.197,0,0,24.168,0,28s17.197,28,50,28c32.801,0,50-24.168,50-28S82.801,0,50,0z M50,49.539   c-12.273,0-22.223-9.643-22.223-21.539S37.727,6.461,50,6.461S72.223,16.104,72.223,28S62.273,49.539,50,49.539z M50,28   c-2.035-2.234,3.316-10.77,0-10.77c-6.137,0-11.111,4.822-11.111,10.77S43.863,38.77,50,38.77c6.135,0,11.111-4.822,11.111-10.77   C61.111,25.268,51.73,29.898,50,28z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg><div class="counterTxt">'+
(d.meta.views?d.meta.views:0)+"</div>",h.getElementsByTagName("svg")[0].style.fill=p(c(this.appName).modalInfoBoxTitleTextColor,1),f.appendChild(h),h=document.createElement("div"),h.className="likesViewCom",h.innerHTML='<svg enable-background="new 0 0 51 46" height="46px" id="Layer_1" version="1.1" viewBox="0 0 51 46" width="51px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M46.188,4.101c-5.529-5.53-14.495-5.53-20.023,0L25.39,4.875l-0.996-0.774c-5.529-5.53-14.715-5.53-20.245,0  C-1.38,9.63-1.27,18.595,4.26,24.125l18.753,18.643c0.671,0.671,1.4,1.258,2.376,1.766c0.76-0.508,1.483-1.095,2.155-1.766  l18.643-18.643C51.717,18.595,51.717,9.63,46.188,4.101z""/></svg><div class="counterTxt">'+
(d.meta.likes?d.meta.likes:0)+"</div>",h.getElementsByTagName("svg")[0].style.fill=p(c(this.appName).modalInfoBoxTitleTextColor,1),f.appendChild(h),h=document.createElement("div"),h.className="likesViewCom",h.innerHTML='<svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><path d="M20,1H4C1.8,1,0,2.8,0,5v10c0,2.2,1.8,4,4,4v3c0,0.9,1.1,1.3,1.7,0.7L9.4,19H20c2.2,0,4-1.8,4-4V5   C24,2.8,22.2,1,20,1z M14,13H8c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h6c0.6,0,1,0.4,1,1C15,12.6,14.6,13,14,13z M16,9H8   C7.4,9,7,8.6,7,8c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1C17,8.6,16.6,9,16,9z" id="message"/></g></svg><div class="counterTxt">'+
(d.comment_count?d.comment_count:0)+"</div>",h.getElementsByTagName("svg")[0].style.fill=p(c(this.appName).modalInfoBoxTitleTextColor,1),f.appendChild(h),a.appendChild(f));c(this.appName).infoBarDateInfoEnable&&(f=document.createElement("div"),f.className="gmDescriptionWrap",f.style.color=p(c(this.appName).modalInfoBoxTextColor,1),f.style.fontSize="100%",h="",g='<span class="gmItemMetaKey">Upload: </span><span class="gmItemMetaValue">'+C(d.date)+"</span></br>",h+=g,d.meta.data&&d.meta.data.created_timestamp&&
(d='<span class="gmItemMetaKey">Taken: </span><span class="gmItemMetaValue">'+C(d.meta.data.created_timestamp)+"</span>",h+=d),f.innerHTML='<div class="gmItemsDate">'+h+"</div>",""!=h&&a.appendChild(f));return a}function qa(a,b,d,e){function g(a){if(!b.dragging){a=this.getAttribute("type");var c="menubar=no,toolbar=no,resizable=yes,scrollbars=yes, top=200, left="+(screen.width-600)/2+", height=450,width=600";switch(a){case "copy":m&&window.open(e,"_blank");a=document.getElementById("gmSH_title_copy");
c=this.getElementsByClassName("gmItemCopyLink")[0].getElementsByTagName("svg")[0];window.getSelection().selectAllChildren(a);try{document.execCommand("copy"),window.getSelection().removeAllRanges(),c.style.fill="green",a.style.color="green",m=!0}catch(ra){window.open(e,"_blank")}break;case "facebook":window.open("https://www.facebook.com/share.php?u="+e,"",c);break;case "twitter":window.open("https://twitter.com/intent/tweet?text="+encodeURI(d.title)+"&url="+e,"",c);break;case "pinterest":window.open("http://www.pinterest.com/pin/create/button/?url="+
e+"&media="+d.url+"&description="+encodeURI(d.title),"",c)}}}this.appName=a;a=document.createElement("div");a.className="gmAlbumsViewFL_ItemShare";a.style.backgroundColor=c(this.appName).modalInfoBoxBgColor;if(!q()||q()&&N){var f=document.createElement("div");f.className="gmInfoBarCloseButton";f.innerHTML='<svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
f.childNodes[0].style.fill=p(c(this.appName).modalInfoBoxTitleTextColor,1);f.addEventListener("click",function(){b.prepareToRemove()},!1);a.appendChild(f)}var h='<span class="gmItemTitle" style="color: '+c(this.appName).modalInfoBoxTitleTextColor+'">'+c(this.appName).shareTitlePlaceHolder+"<br>";h=d.title&&""!=d.title?h+('<span class="gmItemDescription" style="color: '+c(this.appName).modalInfoBoxTextColor+'">'+d.title+"</span></span>"):h+"</span>";""!=h&&(f=document.createElement("div"),f.className=
"gmDescriptionWrap",f.style.float="none",f.innerHTML=h,a.appendChild(f));f=document.createElement("div");f.className="gmDescriptionWrap";f.style.float="none";f.style.padding="0px 20px";a.appendChild(f);var m=!1;h=document.createElement("div");h.setAttribute("type","facebook");h.className="gmItemShareButtonWrap";h.id="gmedia_share_fb";var k=document.createElement("div");k.className="gmItemShareButton";k.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M27.6 3h-23.2c-.8 0-1.4.6-1.4 1.4v23.1c0 .9.6 1.5 1.4 1.5h12.5v-10.1h-3.4v-3.9h3.4v-2.9c0-3.4 2.1-5.2 5-5.2 1.4 0 2.7.1 3 .2v3.5h-2.1c-1.6 0-1.9.8-1.9 1.9v2.5h3.9l-.5 3.9h-3.4v10.1h6.6c.8 0 1.4-.6 1.4-1.4v-23.2c.1-.8-.5-1.4-1.3-1.4z"></path></svg><div class="gmSH_title" style="color: #3b5998">Facebook</div>';
k.getElementsByTagName("svg")[0].style.fill="#3b5998";h.appendChild(k);h.addEventListener("mouseup",g,!1);q()&&h.addEventListener("touchend",g,!1);f.appendChild(h);h=document.createElement("div");h.setAttribute("type","twitter");h.className="gmItemShareButtonWrap";h.id="gmedia_share_tw";k=document.createElement("div");k.className="gmItemShareButton";k.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg><div class="gmSH_title" style="color: #00aced">Twitter</div>';
k.getElementsByTagName("svg")[0].style.fill="#00aced";h.appendChild(k);h.addEventListener("mouseup",g,!1);q()&&h.addEventListener("touchend",g,!1);f.appendChild(h);h=document.createElement("div");h.setAttribute("type","pinterest");h.className="gmItemShareButtonWrap";h.id="gmedia_share_pin";k=document.createElement("div");k.className="gmItemShareButton";k.innerHTML='<svg enable-background="new 0 0 32 32" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Flat_copy"><path d="M28.386,10.53c0,7.21-4.008,12.598-9.918,12.598c-1.985,0-3.851-1.073-4.49-2.292c0,0-1.068,4.235-1.292,5.053   c-0.796,2.888-3.137,5.777-3.318,6.015c-0.127,0.165-0.407,0.113-0.437-0.105c-0.051-0.368-0.647-4.013,0.055-6.986   c0.352-1.493,2.364-10.016,2.364-10.016s-0.586-1.174-0.586-2.908c0-2.725,1.578-4.758,3.544-4.758   c1.672,0,2.479,1.254,2.479,2.759c0,1.682-1.069,4.194-1.622,6.522c-0.461,1.95,0.978,3.541,2.901,3.541   c3.482,0,5.827-4.474,5.827-9.773c0-4.028-2.712-7.044-7.648-7.044c-5.574,0-9.049,4.158-9.049,8.803   c0,1.602,0.473,2.732,1.213,3.605c0.339,0.402,0.387,0.563,0.264,1.025c-0.09,0.339-0.29,1.152-0.376,1.475   c-0.122,0.466-0.499,0.632-0.92,0.46c-2.567-1.048-3.764-3.861-3.764-7.022C3.614,6.261,8.017,0,16.75,0   C23.769,0,28.386,5.077,28.386,10.53z"/></g></svg><div class="gmSH_title" style="color: #cc2127">Pinterest</div>';
k.getElementsByTagName("svg")[0].style.fill="#cc2127";h.appendChild(k);h.addEventListener("mouseup",g,!1);q()&&h.addEventListener("touchend",g,!1);f.appendChild(h);h=document.createElement("div");h.setAttribute("type","copy");h.className="gmItemShareButtonWrap";h.id="gmedia_share_link";k=document.createElement("div");k.className="gmItemCopyLink";k.innerHTML='<svg version="1.1" viewBox="0 0 80 80" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M29.298,63.471l-4.048,4.02c-3.509,3.478-9.216,3.481-12.723,0c-1.686-1.673-2.612-3.895-2.612-6.257   s0.927-4.585,2.611-6.258l14.9-14.783c3.088-3.062,8.897-7.571,13.131-3.372c1.943,1.93,5.081,1.917,7.01-0.025   c1.93-1.942,1.918-5.081-0.025-7.009c-7.197-7.142-17.834-5.822-27.098,3.37L5.543,47.941C1.968,51.49,0,56.21,0,61.234   s1.968,9.743,5.544,13.292C9.223,78.176,14.054,80,18.887,80c4.834,0,9.667-1.824,13.348-5.476l4.051-4.021   c1.942-1.928,1.953-5.066,0.023-7.009C34.382,61.553,31.241,61.542,29.298,63.471z M74.454,6.044   c-7.73-7.67-18.538-8.086-25.694-0.986l-5.046,5.009c-1.943,1.929-1.955,5.066-0.025,7.009c1.93,1.943,5.068,1.954,7.011,0.025   l5.044-5.006c3.707-3.681,8.561-2.155,11.727,0.986c1.688,1.673,2.615,3.896,2.615,6.258c0,2.363-0.928,4.586-2.613,6.259   l-15.897,15.77c-7.269,7.212-10.679,3.827-12.134,2.383c-1.943-1.929-5.08-1.917-7.01,0.025c-1.93,1.942-1.918,5.081,0.025,7.009   c3.337,3.312,7.146,4.954,11.139,4.954c4.889,0,10.053-2.462,14.963-7.337l15.897-15.77C78.03,29.083,80,24.362,80,19.338   C80,14.316,78.03,9.595,74.454,6.044z"></path></g></svg><div id="gmSH_title_copy" class="gmSH_title" style="color: #7d7d7d">'+
e+"</div>";k.getElementsByTagName("svg")[0].style.fill="#7d7d7d";h.appendChild(k);h.addEventListener("mouseup",g,!1);q()&&h.addEventListener("touchend",g,!1);f.appendChild(h);a.appendChild(f);return a}function R(a){var b=this;this.type=void 0;this.delegate=a;this.appName=a.appName;this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_Modal";this.closeButton=document.createElement("div");this.closeButton.style.position="absolute";this.closeButton.style.zIndex=-100;this.closeButton.className=
"gmModalCloseButton";this.closeButton.style.width="100%";this.closeButton.style.height="100%";this.closeButton.style.backgroundColor=c(this.appName).modaBgColor;this.closeButton.style.willChange="opacity";this.closeButton.style.opacity=c(this.appName).modalBgAlpha;this.closeButton.addEventListener("click",function(a){b.prepareToRemove(a)},!1);this.view.appendChild(this.closeButton);a=document.createElement("div");a.className="gmflexe";this.view.appendChild(a);this.scrollView=void 0;this.dragging=
!1;this._scrollViewTranslateY=0;this.startDragHandler=void 0;this.viewCompleted=!1;this.addToStage()}function S(a){function b(a){switch(a.type){case "mouseenter":d.selector.style.opacity="1";break;case "mouseleave":d._selected||(d.selector.style.opacity="0")}}var d=this;this.delegate=a;this.appName=a.appName;this.item=void 0;this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_ScrollBarItem";A&&this.view.classList.add("miniScreen");this.bgImg=document.createElement("div");this.bgImg.className=
"gmAlbumsViewFL_ScrollBarItemBg";this.view.appendChild(this.bgImg);this.imgSRC=void 0;this.selector=document.createElement("div");this.selector.className="gmAlbumsViewFL_ScrollBarItemHover";this.selector.style.borderColor=c(this.appName).sliderThumbBarHoverColor;this.view.appendChild(this.selector);this._selected=!1;this.view.addEventListener("mouseenter",b,!1);this.view.addEventListener("mouseleave",b,!1)}function ba(a){this.delegate=a;this.appName=a.appName;this.itemsList=[];this.thumbSize=new u(100,
80);this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_TermScrollBarWrap";A&&this.view.classList.add("miniScreen");this.scrollView=document.createElement("div");this.scrollView.className="gmAlbumsViewFL_ScrollView";this.scrollView.style.width="0px";this.view.appendChild(this.scrollView);this.thumbsList=[];this._scrollWidth=this.itemsInStageCount=0;this.dragging=this.viewCompleted=!1;this.scrollViewTranslateX=0;this.activAudioIndex=this.activIndex=this.startDragHandler=void 0}
function ca(a){this.delegate=a;this.id=this.item=void 0;this.appName=a.appName;this.itemIndex=void 0;this.positionIndex=0;this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_SliderPage";this.itemInner=document.createElement("div");this.itemInner.className="gmedia_sliderPage_inner";this.view.appendChild(this.itemInner);this.iconHolder=document.createElement("div");this.iconHolder.className="gmedia_iconHolder";this.preloader=L(p(c(this.appName).sliderPreloaderColor,1));this.preloader.style.display=
"none";this.view.appendChild(this.preloader);this.view.appendChild(this.iconHolder);c(this.appName).key||(a=c(this.appName).tv.cloneNode(!0),a.style.left="50%",a.style.top="50%",a.style.transform="translateX(-50%) translateY(-50%)",a.style.transform="translateX(-50%) translateY(-50%)",a.style.zIndex="999999",this.view.appendChild(a));this.size=new u(0,0);this.imgSize=new u(0,0);this._imageFrame=new G(0,0,0,0);this.maxYoffset=this.maxXoffset=this.height=this.width=0;this.MaxScale=4;this.newScaleMW=
this.newScale=this.scale=this.imgScale=1;this._viewTranslate=new t(0,0);this.origin=new t(0,0);this.animaSliderRender=this.boundingBoxScale=this.boundingBox=void 0;this.newY=this.oldY=this.newX=this.oldX=this.speedY=this.speedX=0;this.isBlockDragingMem=this.isBlockDraging=this.draging=!1;this.startDistForZoom=this.startGlobalPoint=this.startScale=void 0}function da(a){this.delegate=a;this.appName=this.delegate.appName;this.id=this.appName+"sliderAView_";this.itemsList=void 0;this.visibleBounds=new G(0,
0,0,0);this.needHideControlls=this.isControllsShow=!1;this.firsrTap=void 0;this.removing=!1;this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_ColectionSlider";H.desktop||(this.view.style.height="100%");this.view.id=this.id+"main";this.resizeDelay=void 0;this.size=new u(0,0);a=document.createElement("div");a.className="gmSliderBg";a.style.backgroundColor=c(this.appName).sliderBgColor;this.background=a;this.view.appendChild(a);this.sliderPages=[];this.zoomingDrag=this.dragging=
!1;this._scrollViewTranslateY=this._scrollViewTranslateX=this.speedY=this.speedX=0;this.currentItemIndex=this.startDragHandler=void 0;this.startItemIndex=0;this.items=[];this.itemsAmount=0;this.animaSliderRender=this.zoomingPage=this.pageInFocusPrev=this.pageInFocus=this._itemNum=void 0;this.slider=document.createElement("div");this.slider.className="gmAlbumsViewFL_SlidesWrap";this.view.appendChild(this.slider);this.footer=document.createElement("div");this.footer.className="gmAlbumsViewFL_SlidesFooter";
this.footer.style.backgroundImage="linear-gradient(180deg,"+p(c(this.appName).sliderHeaderFooterBgColor,0)+","+p(c(this.appName).sliderHeaderFooterBgColor,1)+")";this.view.appendChild(this.footer);this.header=document.createElement("div");this.header.className="gmAlbumsViewFL_SlidesHeader";this.header.style.backgroundImage="linear-gradient(0deg,"+p(c(this.appName).sliderHeaderFooterBgColor,0)+","+p(c(this.appName).sliderHeaderFooterBgColor,1)+")";A&&this.header.classList.add("gmAlbumsViewFL_SlidesHeaderMiniScreen");
this.view.appendChild(this.header);this.copyR=this.copyRight();this.createControlls();this.addToStage()}function ea(a){this.delegate=a;this.appName=a.appName;this.id=this.appName+"_tag_";this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_CollectionTagsCloud";this.list=document.createElement("ul");this.view.appendChild(this.list)}function T(a,b,d){function e(a){"like"==a.getAttribute("type")&&a.getAttribute("like")||("bookmark"==a.getAttribute("type")&&a.getAttribute("bookmark")?
a.style.backgroundColor=f.backgroundColor:(a.style.backgroundColor=f.backgroundColor,a.childNodes[0].style.fill=f.iconColor))}function g(a){if("click"==a.type){if(a=f.item)switch(this.getAttribute("type")){case "info":c(f.appName).appEventManager.dispatchGMEvent(new n(r.NEED_MODAL,f,{type:"info",item:a}));break;case "link":a.link&&window.open(a.link,c(f.appName).linkTargetWindow);break;case "like":e(this);f.delegate.likeItem=f.item;this.setAttribute("like",f.item.ID);this.style.cursor="default";this.style.pointerEvents=
"none";this.getElementsByTagName("svg")[0].style.fill="red";break;case "share":c(f.appName).appEventManager.dispatchGMEvent(new n(r.NEED_MODAL,f,{type:"share",item:a}));break;case "download":a=a.url;var b=document.createElement("A");b.href=a;b.download=a.substr(a.lastIndexOf("/")+1);document.body.appendChild(b);b.click();document.body.removeChild(b);break;case "coments":a=a.sharelink+"/#comments";window.open(a,"_self");break;case "fullscreen":c(f.appName).appEventManager.dispatchGMEvent(new n(r.FULLSCREEN_SWITCH,
f)),e(this)}}else"mouseenter"==a.type?"bookmark"==this.getAttribute("type")&&this.getAttribute("bookmark")?this.style.backgroundColor=f.backgroundColorOver:(this.style.backgroundColor=f.backgroundColorOver,this.childNodes[0].style.fill=f.iconColorOver):"mouseleave"==a.type&&e(this)}var f=this;this.delegate=a;this.appName=a.appName;this.item=void 0;this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_CollectionItemInfoMenu";this.backgroundColor=b.backgroundColor;this.backgroundColorOver=
b.backgroundColorOver;this.iconColor=b.iconColor;this.iconColorOver=b.iconColorOver;a=void 0;a=document.createElement("div");a.className="itemsButtons";d&&a.classList.add("lightbox");a.setAttribute("type","link");a.innerHTML='<svg version="1.1" viewBox="0 0 80 80" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M29.298,63.471l-4.048,4.02c-3.509,3.478-9.216,3.481-12.723,0c-1.686-1.673-2.612-3.895-2.612-6.257   s0.927-4.585,2.611-6.258l14.9-14.783c3.088-3.062,8.897-7.571,13.131-3.372c1.943,1.93,5.081,1.917,7.01-0.025   c1.93-1.942,1.918-5.081-0.025-7.009c-7.197-7.142-17.834-5.822-27.098,3.37L5.543,47.941C1.968,51.49,0,56.21,0,61.234   s1.968,9.743,5.544,13.292C9.223,78.176,14.054,80,18.887,80c4.834,0,9.667-1.824,13.348-5.476l4.051-4.021   c1.942-1.928,1.953-5.066,0.023-7.009C34.382,61.553,31.241,61.542,29.298,63.471z M74.454,6.044   c-7.73-7.67-18.538-8.086-25.694-0.986l-5.046,5.009c-1.943,1.929-1.955,5.066-0.025,7.009c1.93,1.943,5.068,1.954,7.011,0.025   l5.044-5.006c3.707-3.681,8.561-2.155,11.727,0.986c1.688,1.673,2.615,3.896,2.615,6.258c0,2.363-0.928,4.586-2.613,6.259   l-15.897,15.77c-7.269,7.212-10.679,3.827-12.134,2.383c-1.943-1.929-5.08-1.917-7.01,0.025c-1.93,1.942-1.918,5.081,0.025,7.009   c3.337,3.312,7.146,4.954,11.139,4.954c4.889,0,10.053-2.462,14.963-7.337l15.897-15.77C78.03,29.083,80,24.362,80,19.338   C80,14.316,78.03,9.595,74.454,6.044z"></path></g></svg>';
a.style.backgroundColor=this.backgroundColor;a.childNodes[0].style.fill=this.iconColor;this.linkButton=a;a.addEventListener("click",g,!1);a.addEventListener("mouseenter",g,!1);a.addEventListener("mouseleave",g,!1);this.view.appendChild(a);if(!d&&c(this.appName).collectionInfoEnable||d&&c(this.appName).sliderInfoEnable)a=document.createElement("div"),a.className="itemsButtons",d&&a.classList.add("lightbox"),a.setAttribute("type","info"),a.innerHTML='<svg height="100px" id="Capa_1" style="enable-background:new 0 0 46 100;" version="1.1" viewBox="0 0 46 100" width="46px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M35.162,0c6.696,0,10.043,4.567,10.043,9.789c0,6.522-5.814,12.555-13.391,12.555c-6.344,0-10.045-3.752-9.869-9.947   C21.945,7.176,26.35,0,35.162,0z M14.543,100c-5.287,0-9.164-3.262-5.463-17.615l6.07-25.457c1.057-4.077,1.23-5.707,0-5.707   c-1.588,0-8.451,2.816-12.51,5.59L0,52.406C12.863,41.48,27.662,35.072,34.004,35.072c5.285,0,6.168,6.361,3.525,16.148   L30.58,77.98c-1.234,4.729-0.703,6.359,0.527,6.359c1.586,0,6.787-1.963,11.896-6.041L46,82.377C33.488,95.1,19.83,100,14.543,100z   "/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.infoButton=a,a.addEventListener("click",g,!1),a.addEventListener("mouseenter",g,!1),a.addEventListener("mouseleave",g,!1),this.view.appendChild(a);if(!d&&c(this.appName).collectionItemDiscuss||d&&c(this.appName).sliderItemDiscuss)a=document.createElement("div"),a.className="itemsButtons",d&&a.classList.add("lightbox"),a.setAttribute("type","coments"),a.innerHTML='<svg style="enable-background:new 0 0 24 24;" version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><path d="M20,1H4C1.8,1,0,2.8,0,5v10c0,2.2,1.8,4,4,4v3c0,0.9,1.1,1.3,1.7,0.7L9.4,19H20c2.2,0,4-1.8,4-4V5   C24,2.8,22.2,1,20,1z M14,13H8c-0.6,0-1-0.4-1-1c0-0.6,0.4-1,1-1h6c0.6,0,1,0.4,1,1C15,12.6,14.6,13,14,13z M16,9H8   C7.4,9,7,8.6,7,8c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1C17,8.6,16.6,9,16,9z" id="message"/></g></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.commentsButton=a,a.addEventListener("click",g,!1),a.addEventListener("mouseenter",g,!1),a.addEventListener("mouseleave",g,!1),this.view.appendChild(a);if(!d&&c(this.appName).collectionItemDownload||d&&c(this.appName).sliderItemDownload)a=document.createElement("div"),a.className="itemsButtons",d&&a.classList.add("lightbox"),a.setAttribute("type","download"),a.innerHTML='<svg version="1.1" viewBox="0 0 24 24" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="info"/><g id="icons"><g id="save"><path d="M11.2,16.6c0.4,0.5,1.2,0.5,1.6,0l6-6.3C19.3,9.8,18.8,9,18,9h-4c0,0,0.2-4.6,0-7c-0.1-1.1-0.9-2-2-2c-1.1,0-1.9,0.9-2,2    c-0.2,2.3,0,7,0,7H6c-0.8,0-1.3,0.8-0.8,1.4L11.2,16.6z"/><path d="M19,19H5c-1.1,0-2,0.9-2,2v0c0,0.6,0.4,1,1,1h16c0.6,0,1-0.4,1-1v0C21,19.9,20.1,19,19,19z"/></g></g></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.downloadButton=a,a.addEventListener("click",g,!1),a.addEventListener("mouseenter",g,!1),a.addEventListener("mouseleave",g,!1),this.view.appendChild(a);if(!d&&c(this.appName).collectionSocialShareEnabled||d&&c(this.appName).sliderSocialShareEnabled)a=document.createElement("div"),a.className="itemsButtons",d&&a.classList.add("lightbox"),a.setAttribute("type","share"),a.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1344 1024q133 0 226.5 93.5t93.5 226.5-93.5 226.5-226.5 93.5-226.5-93.5-93.5-226.5q0-12 2-34l-360-180q-92 86-218 86-133 0-226.5-93.5t-93.5-226.5 93.5-226.5 226.5-93.5q126 0 218 86l360-180q-2-22-2-34 0-133 93.5-226.5t226.5-93.5 226.5 93.5 93.5 226.5-93.5 226.5-226.5 93.5q-126 0-218-86l-360 180q2 22 2 34t-2 34l360 180q92-86 218-86z"/></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.shareButton=a,a.addEventListener("click",g,!1),a.addEventListener("mouseenter",g,!1),a.addEventListener("mouseleave",g,!1),this.view.appendChild(a);if(!d&&c(this.appName).collectionLikesEnabled||d&&c(this.appName).sliderLikesEnabled)a=document.createElement("div"),a.className="itemsButtons",d&&a.classList.add("lightbox"),a.setAttribute("type","like"),a.innerHTML='<svg enable-background="new 0 0 51 46" height="46px" id="Layer_1" version="1.1" viewBox="0 0 51 46" width="51px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M46.188,4.101c-5.529-5.53-14.495-5.53-20.023,0L25.39,4.875l-0.996-0.774c-5.529-5.53-14.715-5.53-20.245,0  C-1.38,9.63-1.27,18.595,4.26,24.125l18.753,18.643c0.671,0.671,1.4,1.258,2.376,1.766c0.76-0.508,1.483-1.095,2.155-1.766  l18.643-18.643C51.717,18.595,51.717,9.63,46.188,4.101z""/></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.likeButton=a,a.addEventListener("click",g,!1),a.addEventListener("mouseenter",g,!1),a.addEventListener("mouseleave",g,!1),this.view.appendChild(a);d&&!H.ios&&(a=document.createElement("div"),a.className="itemsButtons",d&&a.classList.add("lightbox"),a.setAttribute("type","fullscreen"),a.innerHTML='<svg height="14px" version="1.1" viewBox="0 0 14 14" width="14px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><desc/><defs/><g fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g transform="translate(-215.000000, -257.000000)"><g id="fullscreen" transform="translate(215.000000, 257.000000)"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z" id="Shape"/></g></g></g></svg>',
a.style.backgroundColor=this.backgroundColor,a.childNodes[0].style.fill=this.iconColor,this.fullscreenButton=a,a.addEventListener("click",g,!1),a.addEventListener("mouseenter",g,!1),a.addEventListener("mouseleave",g,!1),this.view.appendChild(a))}function K(a,b,d){this.delegate=a;this.query=d;this.appName=b;this.query.per_page=0;this.query.page=1;this.properties=void 0;this.itemsList=[];this.filteredList=[];this.presentedList=[];this.page_Amount=0;this.scrollHandler=this.currentPage=void 0;this.terms=
[];this.term=void 0;this.lastPageItems=[];this.tagsCloud=c(this.appName).tagsFilter?{0:c(this.appName).tagCloudAll}:void 0;this._filter=0;this.view=document.createElement("div");this.header=document.createElement("div");this.content=document.createElement("div");this.footer=document.createElement("div");this.tagsCloudView=void 0;this.header.className="gmedia_header";this.content.className="gmedia_content";this.footer.className="gmedia_footer";this.header.style.padding="0 "+c(b).thumbSpacing/2+"px";
this.content.style.paddingBottom=c(b).thumbSpacing+"px";this.view.appendChild(this.header);this.view.appendChild(this.content);this.view.appendChild(this.footer);this.resizeTimeOut=void 0;this.viewWidth=0;c(this.appName).appEventManager.addGMEventListener(r.COLLECTION_DATA_REDY,this,"dataLoaded");a={};a.backgroundColor=c(this.appName).collectionThumbSubMenuBackgroundColor;a.backgroundColorOver=c(this.appName).collectionThumbSubMenuBackgroundColorOver;a.iconColor=c(this.appName).collectionThumbSubMenuIconColor;
a.iconColorOver=c(this.appName).collectionThumbSubMenuIconHoverColor;this.itemMenu=new T(this.delegate,a)}function fa(a,b){this.delegate=a;this.appName=a.appName;this.index=b;this.thumbSize=new u(0,0);this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_MasonryCollection_Item";this.space=c(this.appName).thumbSpacing/2+"px";this.view.style.padding=this.space;this.view.style.fontSize=c(this.appName).collectionThumbFontSize+"px";this.view.style.color=c(this.appName).collectionThumbTitleColor;
this._display=this.opacityDelay=void 0}function O(a,b,d){K.apply(this,arguments);this.view.className="gmAlbumsViewFL_MasonryCollection";this.columnsArr=[];this.columnsHeightsArr=[]}function ha(a,b){this.term=a;this.delegate=b;this.appName=b.appName;var d=this;this.view=document.createElement("div");this.view.className="gmAlbumsViewFLTermCollection";this.animeBG=document.createElement("div");this.animeBG.className="gmAlbumsAnimeBG";this.animeBG.style.backgroundColor=p(c(d.appName).collectionBgColor,
1);this.view.appendChild(this.animeBG);this.removing=!1;this.header=document.createElement("div");this.header.className="gmAlbumsTermHeader";this.header.style.backgroundColor=p(c(this.appName).collectionHeaderBgColor,1);a.name&&(this.title=document.createElement("div"),this.title.className="gmAlbumsTitle",this.title.style.color=p(c(this.appName).collectionHeaderTitleTextColor,1),this.title.innerHTML=this.term.name+"&#8192;&bull;&#8192;"+this.term.count,this.header.appendChild(this.title));a.description&&
(b=document.createElement("div"),b.className="gmAlbumsDescription",b.style.color=p(c(this.appName).collectionHeaderTextColor,1),b.innerHTML=a.description,this.header.appendChild(b));if(a.sharelink&&c(this.appName).collectionShareButtons){b=function(a){var b=this.getElementsByTagName("svg")[0];switch(a.type){case "mouseover":b.style.fill=c(d.appName).collectionShareButtonsIconHoverColor;break;case "mouseout":b.style.fill=c(d.appName).collectionShareButtonsIconColor}};var e=function(b){switch(this.title){case "Facebook":var d=
"https://www.facebook.com/share.php?u="+a.sharelink;break;case "Twitter":d="https://twitter.com/intent/tweet?text="+encodeURI(a.name)+"&url="+a.sharelink;break;case "Pinterest":d="http://www.pinterest.com/pin/create/button/?url="+a.sharelink+"&media="+(a.thumbnail?a.thumbnail:"")+"&description="+encodeURI(a.name)}window.open(d,"_blank")},g=document.createElement("div");g.className="gmAlbumsShareMenu";var f=document.createElement("div");f.className="gmAlbumsShareButton";f.setAttribute("title","Facebook");
f.innerHTML='<svg enable-background="new 0 0 32 32" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Flat_copy"><path d="M11.848,32h6.612V15.998h4.411l0.584-5.514H18.46l0.007-2.761c0-1.437,0.137-2.209,2.2-2.209h2.757V0h-4.412   c-5.299,0-7.164,2.675-7.164,7.174v3.311H8.545v5.515h3.303V32z"/></g></svg>';f.style.fill=c(this.appName).collectionShareButtonsIconColor;f.addEventListener("click",e);f.addEventListener("mouseover",
b);f.addEventListener("mouseout",b);g.appendChild(f);f=document.createElement("div");f.className="gmAlbumsShareButton";f.setAttribute("title","Twitter");f.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg>';
f.style.fill=c(this.appName).collectionShareButtonsIconColor;f.addEventListener("click",e);f.addEventListener("mouseover",b);f.addEventListener("mouseout",b);g.appendChild(f);f=document.createElement("div");f.className="gmAlbumsShareButton";f.setAttribute("title","Pinterest");f.innerHTML='<svg enable-background="new 0 0 32 32" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Flat_copy"><path d="M28.386,10.53c0,7.21-4.008,12.598-9.918,12.598c-1.985,0-3.851-1.073-4.49-2.292c0,0-1.068,4.235-1.292,5.053   c-0.796,2.888-3.137,5.777-3.318,6.015c-0.127,0.165-0.407,0.113-0.437-0.105c-0.051-0.368-0.647-4.013,0.055-6.986   c0.352-1.493,2.364-10.016,2.364-10.016s-0.586-1.174-0.586-2.908c0-2.725,1.578-4.758,3.544-4.758   c1.672,0,2.479,1.254,2.479,2.759c0,1.682-1.069,4.194-1.622,6.522c-0.461,1.95,0.978,3.541,2.901,3.541   c3.482,0,5.827-4.474,5.827-9.773c0-4.028-2.712-7.044-7.648-7.044c-5.574,0-9.049,4.158-9.049,8.803   c0,1.602,0.473,2.732,1.213,3.605c0.339,0.402,0.387,0.563,0.264,1.025c-0.09,0.339-0.29,1.152-0.376,1.475   c-0.122,0.466-0.499,0.632-0.92,0.46c-2.567-1.048-3.764-3.861-3.764-7.022C3.614,6.261,8.017,0,16.75,0   C23.769,0,28.386,5.077,28.386,10.53z"/></g></svg>';
f.style.fill=c(this.appName).collectionShareButtonsIconColor;f.addEventListener("click",e);f.addEventListener("mouseover",b);f.addEventListener("mouseout",b);g.appendChild(f);this.shareMenu=g;this.header.appendChild(this.shareMenu)}b=document.createElement("div");b.setAttribute("title","Close (Esc)");b.className="gmAlbumsCloseButton";b.innerHTML='<svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
var h=b.childNodes[0];h.style.fill=c(this.appName).collectionShareButtonsIconColor;b.addEventListener("mouseover",function(){h.style.fill=c(d.appName).collectionShareButtonsIconColor});b.addEventListener("mouseout",function(){h.style.fill=c(d.appName).collectionShareButtonsIconHoverColor});b.addEventListener("click",function(){d.prepareToRemove()});this.closeButton=b;this.header.appendChild(this.closeButton);this.view.appendChild(this.header);this.content=document.createElement("div");this.content.className=
"gmAlbumsTermContent";A&&this.content.classList.add("miniScreen");this.content.style.backgroundColor=p(c(d.appName).collectionBgColor,1);this.view.appendChild(this.content);this.fixedHeader=document.createElement("div");this.fixedHeader.className="gmAlbumsTermHeaderFixed";this.fixedHeader.style.backgroundColor=p(c(this.appName).collectionHeaderBgColor,1);this.view.appendChild(this.fixedHeader);this.startPositionY=window.pageYOffset||document.documentElement.scrollTop;this.windowScrollY=window.scrollY;
this.windowWidth=0;this.viewCompleted=!1;this.bodyElements=[];this.bodyElementsStyle=[];this.isShowFixedHeder=!1;this.gallery=this.scrollHandler=void 0;this.addToStage()}function ia(a,b,d){this.termData=a;this.thumb=void 0;this.appName=b.appName;this.terms_set=d;this.delegate=b}function ja(a,b,d){var e=this;this.termData=a;this.appName=b.appName;this.delegate=b;this.index=null;this.view=document.createElement("div");this.view.className="gmAlbumsViewFLAccordionAlbumCover";this.imageWrap=document.createElement("div");
this.imageWrap.className="backgroundImageWrap";this.imageWrap.style.backgroundColor=p(c(this.appName).coverTagsBgColor,1);this.view.appendChild(this.imageWrap);this.thumbnailSize=this.thumbImgSize=void 0;this.thumbTranslateY=0;a.meta._cover?(this.thumbImg=a.meta._cover.webView,d.stLoad+=1,this.thumbImg.addEventListener("load",function(){e.thumbImgSize=new u(this.naturalWidth,this.naturalHeight);e.thumbImgFrameUpdate();d.loaded+=1;b.preload_covers_status_check()}),this.imageWrap.appendChild(this.thumbImg)):
(this.imageWrap.classList.add("no_cover_image"),this.imageWrap.style.border="1px solid "+p(c(this.appName).coverTagsBgColor,1));this.descriptionWrap=document.createElement("div");this.descriptionWrap.className="gmDescriptionWrap";this.view.appendChild(this.descriptionWrap);this.coverTitle=this.coverDescription=void 0;this.titleOffset=30;this.titleBgStartFrame=new G(0,0,0,0);this.descriptionFrame=new G(0,0,0,0);a=this.termData;if(a.name){var g=document.createElement("div");g.className="gmAlbumsViewFLAccordionAlbumCoverTitleBg";
g.style.backgroundColor=c(this.appName).coverTitleBgColor;this.titleBg=g;this.view.appendChild(g);g=document.createElement("div");g.className="gmAlbumsViewFLAccordionAlbumCoverTitle";g.style.color=c(this.appName).coverTitleTextColor;g.style.fontSize=c(this.appName).coverTitleFontSize+"px";g.innerHTML='<div style="color:'+c(this.appName).coverTitleTextColor+'">'+a.name+'<div style="color:'+c(this.appName).coverTitleTextColor2+'">&#8192;\u00b7&#8192;'+a.count+"</div></div>";this.coverTitle=g;this.view.appendChild(g)}a.description&&
(a=document.createElement("div"),a.className="gmAlbumsViewFLAccordionAlbumCoverDescription",a.style.color=c(this.appName).coverDescriptionTextColor,a.style.fontSize=c(this.appName).coverDescriptionFontSize+"px",this.coverDescription=a,this.view.appendChild(a));this.view.addEventListener("mouseenter",function(){c(b.appName).appEventManager.dispatchGMEvent(new n(r.TERMS_COVER_HANDLER,e,{type:"mouseenter",terms_set:d}))},!1);this.view.addEventListener("click",function(){c(b.appName).appEventManager.dispatchGMEvent(new n(r.TERMS_COVER_HANDLER,
e,{type:"click",terms_set:d}))},!1)}function ka(a){this.delegate=a;this.appName=a.appName;this.view=document.createElement("div");this.view.className="gmAlbumsViewFL_splashPage";this.hoverItemIndex=this.hoverItemTaxonomy=void 0;this.viewWidth=0;this.accordingDelay=void 0;this.coverWidth=c(this.appName).coverWidth;this.touchEvent=void 0}function la(a,b,d){M(a,this);var e=this;this.appApi&&(this.appName=b,this.appDiv=d,this.splashPage=this.modal=void 0,a=this.settings,c(this.appName).appApi=this.appApi,
c(this.appName).post_url=a.post_url,c(this.appName).galleryID="gm"+d.getAttribute("data-gmid"),c(this.appName).appEventManager=new l,a&&(c(this.appName).splashPreloaderColor="#"+a.splashPreloaderColor,c(this.appName).coverHeight=parseInt(a.coverHeight),c(this.appName).coverWidth=parseInt(a.coverWidth),c(this.appName).labelForNextButtonAlbum=a.labelForNextButtonAlbum,c(this.appName).labelForPrevButtonAlbum=a.labelForPrevButtonAlbum,c(this.appName).labelForNextButtonCategory=a.labelForNextButtonCategory,
c(this.appName).labelForPrevButtonCategory=a.labelForPrevButtonCategory,c(this.appName).coverTitleFontSize=parseInt(a.coverTitleFontSize),c(this.appName).coverDescriptionFontSize=parseFloat(a.coverDescriptionFontSize),c(this.appName).coverDescriptionTextColor=a.coverDescriptionTextColor,c(this.appName).coverTitleBgColor=a.coverTitleBgColor,c(this.appName).coverTitleTextColor=a.coverTitleTextColor,c(this.appName).coverTitleTextColor2=a.coverTitleTextColor2,c(this.appName).coverTagsTextColor="#"+a.coverTagsTextColor,
c(this.appName).coverTagsBgColor="#"+a.coverTagsBgColor,c(this.appName).coverTagsBgColor2="#"+a.coverTagsBgColor2,c(this.appName).collectionThumbRecomendedWidth=parseInt(a.collectionThumbRecomendedWidth),c(this.appName).thumbSpacing=parseInt(a.thumbSpacing),c(this.appName).collectionPreloaderColor="#"+a.collectionPreloaderColor,c(this.appName).collectionBgColor="#"+a.collectionBgColor,c(this.appName).collectionHeaderBgColor="#"+a.collectionHeaderBgColor,c(this.appName).collectionHeaderTitleTextColor=
"#"+a.collectionHeaderTitleTextColor,c(this.appName).collectionHeaderTextColor="#"+a.collectionHeaderTextColor,c(this.appName).collectionShareButtons="1"==a.collectionShareButtons?!0:!1,c(this.appName).collectionShareButtonsIconColor=a.collectionShareButtonsIconColor,c(this.appName).collectionShareButtonsIconHoverColor=a.collectionShareButtonsIconHoverColor,c(this.appName).collectionThumbHoverColor=a.collectionThumbHoverColor,c(this.appName).collectionThumbTitleShow="1"==a.collectionThumbTitleShow?
!0:!1,c(this.appName).collectionThumbTitleColor=a.collectionThumbTitleColor,c(this.appName).collectionThumbFontSize=parseInt(a.collectionThumbFontSize),c(this.appName).tagsFilter="1"==a.tagsFilter?!0:!1,c(this.appName).tagCloudAll=a.tagCloudAll,c(this.appName).tagCloudTextColor="#"+a.tagCloudTextColor,c(this.appName).tagCloudBgColor="#"+a.tagCloudBgColor,c(this.appName).collectionInfoEnable="1"==a.collectionInfoEnable?!0:!1,c(this.appName).collectionItemDownload="1"==a.collectionItemDownload?!0:!1,
c(this.appName).collectionItemDiscuss="1"==a.collectionItemDiscuss?!0:!1,c(this.appName).collectionSocialShareEnabled="1"==a.collectionSocialShareEnabled?!0:!1,c(this.appName).collectionLikesEnabled="1"==a.collectionLikesEnabled?!0:!1,c(this.appName).collectionThumbSubMenuBackgroundColor=a.collectionThumbSubMenuBackgroundColor,c(this.appName).collectionThumbSubMenuBackgroundColorOver=a.collectionThumbSubMenuBackgroundColorOver,c(this.appName).collectionThumbSubMenuIconColor=a.collectionThumbSubMenuIconColor,
c(this.appName).collectionThumbSubMenuIconHoverColor=a.collectionThumbSubMenuIconHoverColor,c(this.appName).modaBgColor=a.modaBgColor,c(this.appName).modalInfoBoxBgColor=a.modalInfoBoxBgColor,c(this.appName).modalInfoBoxTitleTextColor="#"+a.modalInfoBoxTitleTextColor,c(this.appName).modalInfoBoxTextColor="#"+a.modalInfoBoxTextColor,c(this.appName).infoBarTermsEnable=!1,c(this.appName).infoBarTermsTitleColor="#"+a.infoBarTermsTitleColor,c(this.appName).infoBarTermsBackgroundColorAlbums="#"+a.infoBarTermsBackgroundColorAlbums,
c(this.appName).infoBarTermsBackgroundColorTags="#"+a.infoBarTermsBackgroundColorTags,c(this.appName).infoBarTermsBackgroundColorCategories="#"+a.infoBarTermsBackgroundColorCategories,c(this.appName).infoBarExifEnable="1"==a.infoBarExifEnable?!0:!1,c(this.appName).infoBarCountersEnable="1"==a.infoBarCountersEnable?!0:!1,c(this.appName).infoBarDateInfoEnable="1"==a.infoBarDateInfoEnable?!0:!1,c(this.appName).shareTitlePlaceHolder=a.shareTitlePlaceHolder,c(this.appName).lightBoxEnable=!0,c(this.appName).sliderThumbBarEnable=
"1"==a.sliderThumbBarEnable?!0:!1,c(this.appName).sliderThumbBarHoverColor=a.sliderThumbBarHoverColor,c(this.appName).sliderPreloaderColor="#"+a.sliderPreloaderColor,c(this.appName).sliderBgColor=a.sliderBgColor,c(this.appName).sliderHeaderFooterBgColor="#"+a.sliderHeaderFooterBgColor,c(this.appName).sliderNavigationColor=a.sliderNavigationColor,c(this.appName).sliderNavigationIconColor=a.sliderNavigationIconColor,c(this.appName).sliderItemTitleFontSize=parseInt(a.sliderItemTitleFontSize),c(this.appName).sliderItemTitleTextColor=
"#"+a.sliderItemTitleTextColor,c(this.appName).sliderThumbSubMenuBackgroundColor=a.sliderThumbSubMenuBackgroundColor,c(this.appName).sliderThumbSubMenuBackgroundColorOver=a.sliderThumbSubMenuBackgroundColorOver,c(this.appName).sliderThumbSubMenuIconColor=a.sliderThumbSubMenuIconColor,c(this.appName).sliderThumbSubMenuIconHoverColor=a.sliderThumbSubMenuIconHoverColor,c(this.appName).sliderInfoEnable="1"==a.sliderInfoEnable?!0:!1,c(this.appName).sliderItemDownload="1"==a.sliderItemDownload?!0:!1,c(this.appName).sliderItemDiscuss=
"1"==a.sliderItemDiscuss?!0:!1,c(this.appName).sliderSocialShareEnabled="1"==a.sliderSocialShareEnabled?!0:!1,c(this.appName).sliderLikesEnabled="1"==a.sliderLikesEnabled?!0:!1),this.viewsSet={},c(this.appName).appEventManager.addGMEventListener(r.COUNTERS_UPDATED,this,"itemsCountersUpdateHandler"),this.likesSet={},window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet"))),this.appDiv.style.position="relative",this.appDiv.style.height="auto",
this.appDivWidth=this.appDiv.clientWidth,window.addEventListener("resize",function(){e.windowResizeHandler()}),c(this.appName).appEventManager.addGMEventListener(r.NEED_MODAL,this,"createModal"),c(this.appName).lightBoxEnable&&(c(this.appName).appEventManager.addGMEventListener(r.NEED_LIGHTBOX,this,"createLightbox"),c(this.appName).appEventManager.addGMEventListener(r.REMOVE_LIGHTBOX,this,"removeLightbox")),this.viewsSet={},c(this.appName).appEventManager.addGMEventListener(r.COUNTERS_UPDATED,this,
"itemsCountersUpdateHandler"),this.likesSet={},window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet"))),this.currentLocationSlider=this.currentLocationCollection=void 0,this.popstateHandler=function(){if(e.slider)e.slider.prepareToRemove();else if(e.currentCollection){e.currentCollection.prepareToRemove();var a=window.location.hash.indexOf(e.appName),b=void 0;a+1&&(b=2<=window.location.hash.substr(a).split("-").length?window.location.hash.substr(a).split("-"):
void 0);b&&b[0]&&b[0]==e.appName&&(window.location.hash="",a=window.location.href.replace("#","")+"",window.history.replaceState(null,null,a))}else e.addCollectionoFromHash()},window.addEventListener("popstate",this.popstateHandler,!1),this.terms={},this.collectionIndex=0,this.currentCollection=void 0,c(this.appName).appEventManager.addGMEventListener(r.REMOVE_COLLECTION,this,"removeCollectionHandler"),this.appQuery&&this.createTermsList(this.appQuery))}var A=!1,N=!1;l.prototype={addGMEventListener:function(a,
b,d){this._listenerSet[a]||(this._listenerSet[a]=[]);this._listenerSet[a].push({listener:b,handler:d})},removeGMEventListener:function(a,b,d){if(this._listenerSet[a])for(var e=0;e<this._listenerSet[a].length;e++)this._listenerSet[a][e].listener==b&&this._listenerSet[a][e].handler==d&&(this._listenerSet[a].splice(e,1),e=this._listenerSet[a].length)},dispatchGMEvent:function(a){if(this._listenerSet[a.type])for(var b=this._listenerSet[a.type],d=0;d<b.length;d++){var e=b[d];if(e&&e.listener&&"function"==
typeof e.listener[e.handler])e.listener[e.handler](a)}}};var r={REQUEST_START:"REQUEST_START",TERMS_DATA_READY:"TERMS_DATA_READY",TERMS_COVER_HANDLER:"TERMS_COVER_HANDLER",COLLECTION_DATA_REDY:"COLLECTION_DATA_REDY",COUNTERS_UPDATED:"COUNTERS_UPDATED",NEED_MODAL:"NEED_MODAL",NEED_LIGHTBOX:"NEED_LIGHTBOX",REMOVE_LIGHTBOX:"REMOVE_LIGHTBOX",REMOVE_COLLECTION:"REMOVE_COLLECTION",NEED_NEW_COLLECTION:"NEED_NEW_COLLECTION",NEED_PREV_COLLECTION:"NEED_PREV_COLLECTION",FULLSCREEN_SWITCH:"FULLSCREEN_SWITCH"},
U=new function(){function a(){d+=1;b(h+1>=e.length?0:h+1)}function b(g){!e||d==e.length&&!f||f&&d>=f||(f&&(f=Math.min(f,e.length)),c=e[g].webView,h=g,c.complete?(d+=1,b(h+1>=e.length?0:h+1)):c.addEventListener("load",a,!1))}var d=0,e=void 0,c=void 0,f=void 0,h=void 0;this.init=function(g,k,l){c&&c.removeEventListener("load",a,!1);f=l;d=0;c=void 0;h=k;e=g;void 0===k&&(k=0);b(k)};this.status=function(){return{list:e,index:h}}},z=y()?{passive:!1,capture:!1}:!1,x=window.requestAnimationFrame||window.mozRequestAnimationFrame||
window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,w=window.cancelAnimationFrame||window.mozCancelAnimationFrame,H=function(){var a=window,b=a.navigator.userAgent,d={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:a.cordova||a.phonegap,phonegap:a.cordova||a.phonegap},e=b.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),c=b.match(/(Android);?[\s\/]+([\d.]+)?/),f=b.match(/(iPad).*OS\s([\d_]+)/),h=b.match(/(iPod)(.*OS\s([\d_]+))?/),m=!f&&b.match(/(iPhone\sOS|iOS)\s([\d_]+)/);
e&&(d.os="windows",d.osVersion=e[2],d.windows=!0);c&&!e&&(d.os="android",d.osVersion=c[2],d.android=!0,d.androidChrome=0<=b.toLowerCase().indexOf("chrome"));if(f||m||h)d.os="ios",d.ios=!0;m&&!h&&(d.osVersion=m[2].replace(/_/g,"."),d.iphone=!0);f&&(d.osVersion=f[2].replace(/_/g,"."),d.ipad=!0);h&&(d.osVersion=h[3]?h[3].replace(/_/g,"."):null,d.iphone=!0);d.ios&&d.osVersion&&0<=b.indexOf("Version/")&&"10"===d.osVersion.split(".")[0]&&(d.osVersion=b.toLowerCase().split("version/")[1].split(" ")[0]);
d.desktop=!(d.os||d.android||d.webView);d.webView=(m||f||h)&&b.match(/.*AppleWebKit(?!.*Safari)/i);d.os&&"ios"===d.os&&(b=d.osVersion.split("."),e=document.querySelector('meta[name="viewport"]'),d.minimalUi=!d.webView&&(h||m)&&(7===1*b[0]?1<=1*b[1]:7<1*b[0])&&e&&0<=e.getAttribute("content").indexOf("minimal-ui"));d.pixelRatio=a.devicePixelRatio||1;return d}();I.prototype={toString:function(){return"matrix("+this.matrix[0][0].toFixed(3)+","+this.matrix[0][1].toFixed(3)+","+this.matrix[1][0].toFixed(3)+
","+this.matrix[1][1].toFixed(3)+","+this.matrix[2][0].toFixed(3)+","+this.matrix[2][1].toFixed(3)+")"},multi:function(a){a=a.matrix;if(this.matrix.length==a[0].length){for(var b=new I(0,0,0,0,0,0),d=this.matrix.length,e=0;e<d;e++)for(var c=a[e].length,f=0;f<c;f++){for(var h=0,m=0;m<d;m++)h+=a[e][m]*this.matrix[m][f];b.matrix[e][f]=h}this.matrix=b.matrix;return this}}};D.prototype={toString:function(){return this.matrix.toString()}};Q.prototype={hasTag:function(a){if("all"==a)return!0;if(!this.tags||
0==this.tags.length)return!1;for(var b=0;b<this.tags.length;b++)if(this.tags[b].term_id==a)return!0},get itemViewSrc(){return this.meta?this.meta.web?this.meta.web.link:this.meta.original?this.meta.original.link:this.meta.thumb?this.meta.thumb.link:null:null},get itemViewThumbSrc(){return this.meta?this.meta.thumb?this.meta.thumb.link:this.meta.web?this.meta.web.link:null:null},get itemViewSize(){return this.meta?this.meta.web?new u(this.meta.web.width,this.meta.web.height):this.meta.original?new u(this.meta.original.width,
this.meta.original.height):new u(300,300):new u(300,300)},get itemViewThumbSize(){return this.meta?this.meta.thumb?new u(this.meta.thumb.width,this.meta.thumb.height):this.meta.web?new u(this.meta.web.width,this.meta.web.height):new u(300,300):new u(300,300)},get webView(){if(this.webImg.src)return this.webImg;this.webImg.src=this.itemViewSrc;return this.webImg}};F.prototype={set gmedia__in(a){this._query&&(this._query.gmedia__in=a.toString(),"myCollection"==this.taxonomy&&this._query&&(this.sharelink=
c(this.appName).post_url+"/?"+c(this.appName).galleryID+"[gmedia__in]="+this._query.gmedia__in))},get taxony_type(){switch(this.taxonomy){case "gmedia_album":return"albums";case "gmedia_category":return"categories";case "gmedia_tag":return"tags";default:return null}}};F.termDataByQueryNameId=function(a,b,d){if(!a.gmedia__in)return null;var e=a.gmedia__in.split(",").length,c=a.orderby,f=a.order;return{count:e,name:b,meta:{_order:f,_orderby:c,order:f,orderby:c},taxonomy:"myCollection",term_id:"myCollection_"+
d,_query:a}};aa.prototype={get cover(){return this._cover?this._cover:null}};R.prototype={addToStage:function(){var a=this,b=document.getElementsByTagName("body")[0];document.getElementsByTagName("html");this.view.style.zIndex=B(b)+1;Y();b.appendChild(this.view);setTimeout(function(){a.view.style.opacity="1"},30);document.addEventListener("keydown",a.keydownHandler(),!1)},prepareToRemove:function(a){var b=this;document.removeEventListener("keydown",this.handlerKB,!1);b.view.style.opacity="0";this.delegate.slider||
Z();setTimeout(function(){b.view&&b.view.parentNode&&b.view.parentNode.removeChild(b.view);delete b.view;b.delegate.deleteModal()},400)},keydownHandler:function(a){var b=this;b.handlerKB=function(a){switch(a.keyCode){case 27:b.prepareToRemove()}};return b.handlerKB},pushPage:function(a){this.viewCompleted=!1;this.scrollView&&this.scrollView.parentNode&&this.scrollView.parentNode.removeChild(this.scrollView);this.view.appendChild(a);this.scrollView=a;this.updateControlls()},updateControlls:function(){if(this.scrollView&&
!this.viewCompleted){this.startDragHandler=this.startDrag();if(q()){var a=y()?{passive:!1,capture:!1}:!1;this.scrollView.addEventListener("touchstart",this.startDragHandler,a)}this.scrollView.addEventListener("mousedown",this.startDragHandler,!1);this.viewCompleted=!0}},get bottom(){return this.view.clientHeight-this.scrollView.clientHeight-20},set scrollViewTranslateY(a){this._scrollViewTranslateY=a;this.scrollView.style.transform="translateY("+a+"px)";a=Math.max(c(this.appName).modalBgAlpha-Math.abs(a/
200),0);this.closeButton.style.opacity=a},get scrollViewTranslateY(){return this._scrollViewTranslateY},startDrag:function(){function a(){m=0<e.scrollViewTranslateY?.2*m+.1*(0-e.scrollViewTranslateY):e.scrollViewTranslateY<e.bottom?.2*m+.1*(e.bottom-e.scrollViewTranslateY):.95*m;e.scrollViewTranslateY+=m;.04>Math.abs(m)?w(n):n=x(a)}function b(a){a.preventDefault();a=a.touches&&a.touches[0]?a.touches[0].pageY:a.pageY;e.dragging=!0;e.scrollViewTranslateY=h-(c-a);k=l;l=e.scrollViewTranslateY;m=l-k}function d(c){c.preventDefault();
e.scrollView.style.transition="none";q()&&(document.removeEventListener("touchmove",b,f),document.removeEventListener("touchend",d,f),document.removeEventListener("touchcancel",d,!1));document.removeEventListener("mousemove",b,!1);document.removeEventListener("mouseup",d,!1);document.removeEventListener("oncontextmenu",d,!1);if(0>=e.bottom){if(e.scrollViewTranslateY<e.bottom-50||50<e.scrollViewTranslateY){e.prepareToRemove();e.dragging=!1;return}}else if(-50>e.scrollViewTranslateY||50<e.scrollViewTranslateY){e.prepareToRemove();
e.dragging=!1;return}(0!=m||0<e.scrollViewTranslateY||e.scrollViewTranslateY<e.bottom)&&e.dragging&&(n=x(a));e.dragging=!1}var e=this,c=void 0,f=y()?{passive:!1,capture:!1}:!1,h=0,m=0,k=0,l=0,n=void 0;return function(a){a?(q()||a.preventDefault(),a.button&&0!==a.button||(m=0,l=e.scrollViewTranslateY,c=a.touches&&a.touches[0]?a.touches[0].pageY:a.pageY,h=e.scrollViewTranslateY,w(n),q()&&(document.addEventListener("touchmove",b,f),document.addEventListener("touchend",d,f),document.addEventListener("touchcancel",
d,!1)),document.addEventListener("mousemove",b,!1),document.addEventListener("mouseup",d,!1),document.addEventListener("oncontextmenu",d,!1))):(m=0,h=e.scrollViewTranslateY,w(n))}}};S.prototype={initByItem:function(a){if(this.imgSRC==a.itemViewThumbSrc)this.delegate.itemsLoaderHandler(this.view.clientWidth);else if(this.item=a,this.imgSRC=a.itemViewThumbSrc,this.bgImg.style.backgroundImage="url("+this.imgSRC+")",this.type=a.type,"audio"==this.type||"video"==this.type){this.hover=document.createElement("div");
this.hover.className="gmAlbumsViewFL_ScrollBarItemLink";this.hover.style.backgroundColor=p("#ffffff",.6);switch(this.type){case "audio":this.hover.innerHTML='<svg version="1.1" viewBox="0 0 58 94" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M37.992,0h-8.021v65.358c-4.435-1.706-10.174-1.73-15.835,0.328C3.994,69.377-2.049,78.355,0.638,85.736   c2.688,7.383,13.088,10.374,23.229,6.683c8.614-3.134,14.249-10.082,14.111-16.626l0.014-53.451   c13.986,2.204,14.943,19.884,13.268,24.842c-0.636,1.879,0.484,3.286,2.598,0C68.938,23.726,37.992,13.376,37.992,0z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>';
break;case "video":"vimeo"==this.item.mime_type.split("/")[1]?this.hover.innerHTML='<svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="-5 -5 66.693 66.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.602,22.974l2.01,2.636c0,0,4.146-3.267,5.528-1.634c1.382,1.634,6.656,21.357,8.417,24.997  c1.537,3.192,5.777,7.413,10.426,4.397c4.646-3.014,20.098-16.205,22.863-31.781c2.764-15.574-18.594-12.313-20.854,1.256  c5.652-3.395,8.671,1.38,5.778,6.784c-2.889,5.399-5.527,8.921-6.908,8.921c-1.379,0-2.441-3.612-4.021-9.928  c-1.635-6.53-1.624-18.291-8.416-16.958C12.019,12.921,3.602,22.974,3.602,22.974z"/></svg>':
this.hover.innerHTML='<svg data-name="Layer 21" height="24" id="Layer_21" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><title/><path d="M21.80731,7.805a2.79915,2.79915,0,0,0-2.54907-2.53906C17.69061,5.13586,15.36707,5,12.50012,5c-3.45251,0-6.05865.14105-7.74353.27332A2.79932,2.79932,0,0,0,2.1925,7.815C2.08936,8.90021,2,10.33344,2,12.0423c0,1.66632.08862,3.07422.19128,4.14594a2.79852,2.79852,0,0,0,2.56384,2.53833C6.43994,18.85883,9.04657,19,12.50012,19c2.86694,0,5.19049-.13586,6.75812-.266a2.799,2.799,0,0,0,2.54907-2.539C21.91052,15.11548,22,13.69189,22,12S21.91052,8.88452,21.80731,7.805ZM9.77594,14.93878V9.06122L15.574,12Z"/></svg>'}this.view.appendChild(this.hover)}},
set musicIdentifireStatus(a){},select:function(a){this.selector.style.opacity=a?"1":"0";this._selected=a}};ba.prototype={initItemsList:function(a){this.itemsList=a;a=new S(this);this.scrollView.appendChild(a.view);this.thumbSize.width=a.view.clientWidth;this.thumbSize.height=a.view.clientHeight;this.scrollView.removeChild(a.view);this.prepare();this.view.style.height=this.scrollView.style.height=this.thumbSize.height+"px";this._scrollWidth=this.thumbSize.width*this.itemsList.length;this.scrollView.style.width=
this._scrollWidth+5+"px";this.scrollViewTranslateX=0;this.updateView()},addThumbByIndex:function(a){function b(a){"touchend"!=a.type&&"mouseup"!=a.type||d.dragging||(d.delegate.gotoPageByNum(parseInt(this.getAttribute("gmIndex"))),d.startDragHandler&&d.startDragHandler())}if(!this.thumbsList[a]){var d=this,e=new S(this);this.thumbsList[a]=e;this.itemsInStageCount+=1;q()&&e.view.addEventListener("touchend",b,!1);e.view.addEventListener("mouseup",b,!1);e.view.style.left=this.thumbSize.width*a+"px";
this.scrollView.appendChild(e.view);e.initByItem(this.itemsList[a]);e.view.setAttribute("gmIndex",a)}},changeAudioStatusForIndex:function(a,b){!this.activAudioIndex&&0!==this.activAudioIndex||a==this.activAudioIndex||(this.thumbsList[this.activAudioIndex].musicIdentifireStatus="ended");this.thumbsList[a].musicIdentifireStatus=b.type;this.activAudioIndex=a},prepare:function(){this._scrollWidth=0;this.scrollView.style.transform="translateX(0px)";this.scrollView.style.width="0px";this._scrollViewTranslateX=
0},resize:function(){this.updateView()},selectThumbByIndex:function(a){if(void 0!==a&&0!=this.itemsList.length){var b;(this.activIndex||0===this.activIndex)&&(b=this.thumbsList[this.activIndex])&&b.select(!1);this.thumbsList[a]||this.addThumbByIndex(a);if(b=this.thumbsList[a]){b.select(!0);b=this.thumbSize.width*a;var d=b+this.scrollViewTranslateX,e=d+this.thumbSize.width;this.scrollView.style.transition="none";if(0>d||0>e)this.scrollView.style.transition="transform .4s",this.scrollViewTranslateX=
-b;if(d>this.view.clientWidth||e>this.view.clientWidth)this.scrollView.style.transition="transform .4s",this.scrollViewTranslateX=this.view.clientWidth-this.thumbSize.width-b;this._scrollWidth>this.view.clientWidth&&(this.scrollViewTranslateX=Math.max(this.scrollViewTranslateX,-(this._scrollWidth-this.view.clientWidth)))}this.activIndex=a}},updateView:function(){this.selectThumbByIndex(this.activIndex);1>this.view.clientWidth/this._scrollWidth?(this.scrollViewTranslateX=this._scrollViewTranslateX,
this.viewCompleted||(this.scrollView.classList.add("gm_grabbable"),this.startDragHandler=this.startDrag(),q()&&this.scrollView.addEventListener("touchstart",this.startDragHandler,z),this.scrollView.addEventListener("mousedown",this.startDragHandler,!1),this.viewCompleted=!0)):(this.scrollView.classList.remove("gm_grabbable"),this.scrollViewTranslateX=(this.view.clientWidth-this._scrollWidth)/2,this.viewCompleted&&(q()&&this.scrollView.removeEventListener("touchstart",this.startDragHandler,z),this.scrollView.removeEventListener("mousedown",
this.startDragHandler,!1),this.viewCompleted=!1))},set scrollViewTranslateX(a){this._scrollViewTranslateX=a;this.scrollView.style.transform="translateX("+a+"px)";if(this.itemsList.length!=this.itemsInStageCount){var b=Math.max(Math.floor(-a/this.thumbSize.width),0);for(a=Math.min(b+Math.ceil(this.view.clientWidth/this.thumbSize.width),this.itemsList.length-1);b<=a;b++)this.addThumbByIndex(b)}},get scrollViewTranslateX(){return this._scrollViewTranslateX},startDrag:function(a){function b(){return-(f._scrollWidth-
f.view.clientWidth+f.view.getBoundingClientRect().left)}function d(){k=0<f.scrollViewTranslateX?.2*k+.1*(0-f.scrollViewTranslateX):f.scrollViewTranslateX<b()?.2*k+.1*(b()-f.scrollViewTranslateX):.95*k;f.scrollViewTranslateX+=k;.04>Math.abs(k)?w(p):p=x(d)}function e(a){a.preventDefault();if(a=h-(a.touches&&a.touches[0]?a.touches[0].pageX:a.pageX))f.dragging=!0;f.scrollViewTranslateX=m-a;l=n;n=f.scrollViewTranslateX;k=n-l}function c(a){a.preventDefault();f.scrollView.style.transition=null;q()&&(document.removeEventListener("touchmove",
e,z),document.removeEventListener("touchend",c,z),document.removeEventListener("touchcancel",c,!1));document.removeEventListener("mousemove",e,!1);document.removeEventListener("mouseup",c,!1);document.removeEventListener("oncontextmenu",c,!1);if(0!=k||0<f.scrollViewTranslateX||f.scrollViewTranslateX<b())p=x(d);f.dragging=!1}var f=this,h=void 0,m=void 0,k=0,l=0,n=0,p=void 0;return function(a){a?(q()||a.preventDefault(),a.button&&0!==a.button||(k=0,n=f.scrollViewTranslateX,h=a.touches&&a.touches[0]?
a.touches[0].pageX:a.pageX,m=f.scrollViewTranslateX,w(p),q()&&(document.addEventListener("touchmove",e,z),document.addEventListener("touchend",c,z),document.addEventListener("touchcancel",c,!1)),document.addEventListener("mousemove",e,!1),document.addEventListener("mouseup",c,!1),document.addEventListener("oncontextmenu",c,!1))):(k=0,m=f.scrollViewTranslateX,w(p))}}};ca.prototype={initByItem:function(a){if(this.id!=a.ID){var b=this;this.item=a;this.id=a.ID;1!=this.scale&&(this.scale=1,this.viewTranslate=
new t(0,0));this.itemInner.firstChild&&this.itemInner.removeChild(this.itemInner.firstChild);this.itemInner.appendChild(a.webView);this.itemImg=a.webView;a.webView.complete?(this.imgSize.width=this.itemImg.naturalWidth,this.imgSize.height=this.itemImg.naturalHeight,this.isInScale&&this.normalize(),this.fit(!1)):(this.preloader.style.display="block",a.webView.addEventListener("load",function(){b.preloader.style.display="none";b.imgSize.width=this.naturalWidth;b.imgSize.height=this.naturalHeight;b.isInScale&&
b.normalize();b.fit(!1)},!1));switch(a.type){case "audio":this.iconHolder.innerHTML='<svg version="1.1" viewBox="0 0 58 94" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M37.992,0h-8.021v65.358c-4.435-1.706-10.174-1.73-15.835,0.328C3.994,69.377-2.049,78.355,0.638,85.736   c2.688,7.383,13.088,10.374,23.229,6.683c8.614-3.134,14.249-10.082,14.111-16.626l0.014-53.451   c13.986,2.204,14.943,19.884,13.268,24.842c-0.636,1.879,0.484,3.286,2.598,0C68.938,23.726,37.992,13.376,37.992,0z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>';
this.view.classList.add("info_icon");break;case "video":this.view.classList.add("info_icon");this.iconHolder.innerHTML='<svg version="1.1" viewBox="0 0 50 60" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M48.479,27.435L5.672,0.915C2.553-1.132,0,0.374,0,4.261v51.48c0,3.885,2.553,5.391,5.672,3.346l42.807-26.52   c0,0,1.521-1.07,1.521-2.566S48.479,27.435,48.479,27.435z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>';
this.iconHolder.firstChild.style.marginLeft="7px";break;default:this.view.classList.remove("info_icon")}}},set posX(a){this.view.style.left=this.size.width*a+"px";this.positionIndex=a},resize:function(){this.size.width=this.view.clientWidth;this.size.height=this.view.clientHeight;this.posX=this.positionIndex;this.isInScale&&this.normalize();this.fit(!1)},fit:function(a){if(this.itemImg){a=0;c(this.appName).sliderThumbBarEnable&&700<this.size.height&&(a=100);!c(this.appName).sliderThumbBarEnable&&
700<this.size.height&&(a=48);"video"==this.item.type&&(a=40);var b=W(this.imgSize,new u(this.size.width-4,this.size.height-2*a),!1,!1);b.x+=2;b.y+=a;this.imgScale=Math.min(this.imgSize.width/b.width,this.MaxScale);this.item.webImgFrame.x!=b.x||this.item.webImgFrame.y!=b.y||this.item.webImgFrame.width!=b.width||this.item.webImgFrame.height!=b.height?(this.imageFrame=b,this.item.webImgFrame=b):this._imageFrame=b;this.videoWrap&&(this.videoWrapFrame=b)}},set imageFrame(a){this.itemImg.style.left=a.x+
"px";this.itemImg.style.top=a.y+"px";this.itemImg.style.width=a.width+"px";this.itemImg.style.height=a.height+"px";this._imageFrame=a},get imageFrame(){return this._imageFrame},set videoWrapFrame(a){this.videoWrap.style.width=a.width+"px";this.videoWrap.style.height=a.height+"px";this.videoWrap.style.left=a.x+"px";this.videoWrap.style.top=a.y+"px"},checkOffset:function(a,b){if(b!==this.boundingBoxScale){var d=this.imageFrame.width*(b?b:1),e=this.imageFrame.height*(b?b:1),c=this.imageFrame.x*(b?b:
1),f=this.imageFrame.y*(b?b:1);this.boundingBox={left:d>this.size.width?-c:(this.size.width-this.size.width*b)/2,top:e>this.size.height?-f:(this.size.height-this.size.height*b)/2,right:d>this.size.width?this.size.width-(c+d):(this.size.width-this.size.width*b)/2,bottom:e>this.size.height?this.size.height-(f+e):(this.size.height-this.size.height*b)/2};this.boundingBoxScale=b}b=a.x>this.boundingBox.left?this.boundingBox.left:a.x;b=b<this.boundingBox.right?this.boundingBox.right:b;a=a.y>this.boundingBox.top?
this.boundingBox.top:a.y;a=a<this.boundingBox.bottom?this.boundingBox.bottom:a;return new t(b,a)},is_pointInItem:function(a){var b=this.viewTranslate.x+this.size.width/2*this.newScale-this.imageFrame.width/2*this.newScale,d=b+this.imageFrame.width*this.newScale,e=this.size.height/2*this.newScale+this.viewTranslate.y-this.imageFrame.height/2*this.newScale,c=e+this.imageFrame.height*this.scale;return a.x>b&&a.x<d&&a.y>e&&a.y<c?!0:!1},normalize:function(a){w(this.animaSliderRender);a?this.renderTransformTo(new t(0,
0),1):(this.scale=this.newScale=this.newScaleMW=1,this.viewTranslate=new t(0,0),this.origin=new t(0,0))},get isInScale(){return 1==this.newScale&&0==this.origin.x&&0==this.origin.y?!1:!0},zoomIn:function(a,b){"audio"!=this.item.type&&"video"!=this.item.type&&(w(this.animaSliderRender),b=new t(b.x-(b.x-this.viewTranslate.x)/this.scale*a,b.y-(b.y-this.viewTranslate.y)/this.scale*a),this.renderTransformTo(this.checkOffset(b,a),a))},zoomByScaleIter:function(a,b){"audio"!=this.item.type&&"video"!=this.item.type&&
(a=0>a?1.065:.935,w(this.animaSliderRender),this.newScale*a>this.MaxScale&&(a=this.MaxScale/this.newScale),1>this.newScale*a&&(a=1/this.newScale),this.newScale*=a,this.origin=new t(b.x-a*(b.x-this.origin.x),b.y-a*(b.y-this.origin.y)),this.renderTransformTo(this.checkOffset(this.origin,this.newScale),this.newScale))},zoomByScaleDeltaToPoint:function(a,b,d){if("audio"!=this.item.type&&"video"!=this.item.type){w(this.animaSliderRender);a=this.startDistForZoom/this.startScale*(a/this.startDistForZoom)/
(this.startDistForZoom/this.startScale)*this.startScale;d=0;a>this.MaxScale&&(d=.8*-(a-this.MaxScale));a+=d;d=this.startGlobalPoint.x-(this.startGlobalPoint.x-this.startTranslate.x)/this.newScale*a;var e=this.startGlobalPoint.y-(this.startGlobalPoint.y-this.startTranslate.y)/this.newScale*a;b=new t(d-b.x,e-b.y);this.scale=this.newScale=a;this.viewTranslate=b;this.startTranslate=new t(d,e)}},set viewTranslate(a){this._viewTranslate=a;this.itemInner.style.transform="matrix("+this.scale+", 0, 0, "+this.scale+
", "+a.x+", "+a.y+")"},get viewTranslate(){return this._viewTranslate},renderTransformTo:function(a,b){function d(){c=.05*c+.1*(a.x-e.viewTranslate.x);f=.05*f+.1*(a.y-e.viewTranslate.y);b&&(h=.05*h+.1*(b-e.scale));var g=e.viewTranslate.x;g+=c;var k=e.viewTranslate.y;k+=f;b&&(e.scale+=h);e.viewTranslate=new t(g,k);.02>Math.abs(c)&&.02>Math.abs(f)&&.02>Math.abs(h)?(w(e.animaSliderRender),b&&(e.scale=b),e.viewTranslate=new t(a.x,a.y)):e.animaSliderRender=x(d)}var e=this;w(e.animaSliderRender);this.origin=
a;this.newScale=b;var c=0,f=0,h=0;e.animaSliderRender=x(d)},renderGlidingTransform:function(){function a(){b.speedX*=d;b.speedY*=e;var c=b.viewTranslate.x;c+=b.speedX;var f=b.viewTranslate.y;f+=b.speedY;if(c>b.boundingBox.left||c<b.boundingBox.right)b.speedX*=-1,c=(c>b.boundingBox.left?b.boundingBox.left:c<b.boundingBox.right?b.boundingBox.right:c)+b.speedX,d=.75;if(f>b.boundingBox.top||f<b.boundingBox.bottom)b.speedY*=-1,f=(f>b.boundingBox.top?b.boundingBox.top:f<b.boundingBox.bottom?b.boundingBox.bottom:
f)+b.speedY,e=.75;b.origin=new t(c,f);b.viewTranslate=new t(c,f);.02>Math.abs(b.speedX)&&.02>Math.abs(b.speedY)?(w(b.animaSliderRender),b.speedX=0,b.speedY=0):b.animaSliderRender=x(a)}var b=this;w(b.animaSliderRender);var d=.95,e=.95;b.animaSliderRender=x(a)},renderStretchstretchTransform:function(){function a(){e=.2*e+.15*(d.x-b.viewTranslate.x);c=.2*c+.15*(d.y-b.viewTranslate.y);b.viewTranslate=new t(b.viewTranslate.x+e,b.viewTranslate.y+c);.02>Math.abs(e)&&.02>Math.abs(c)?(w(b.animaSliderRender),
b.viewTranslate=d):b.animaSliderRender=x(a)}var b=this;w(b.animaSliderRender);var d=this.checkOffset(new t(b.viewTranslate.x+b.speedX,b.viewTranslate.y+b.speedY),b.scale),e=0,c=0;b.animaSliderRender=x(a)},startDrag:function(a,b){w(this.animaSliderRender);"audio"!=this.item.type&&"video"!=this.item.type&&(this.startDistForZoom=b,this.startGlobalPoint=a,this.startTranslate=this.viewTranslate,this.speedY=this.speedX=0,this.newX=this.viewTranslate.x,this.newY=this.viewTranslate.y,this.startScale=this.scale)},
stopDrag:function(){if("audio"!=this.item.type&&"video"!=this.item.type){if(this.isInScale)if(1>this.scale)this.normalize(!0);else if(this.scale>this.MaxScale)this.zoomIn(this.MaxScale,this.startGlobalPoint);else{var a=this.checkOffset(this.origin,this.newScale);(this.isBlockDraging=a.x!=this.origin.x||a.y!=this.origin.y)&&this.renderStretchstretchTransform()}this.draging&&(this.isBlockDraging?this.renderStretchstretchTransform():this.renderGlidingTransform(),this.draging=!1)}},dragin:function(a){if("audio"==
this.item.type||"video"==this.item.type)return!1;var b=this.startTranslate.x-a.x;a=this.startTranslate.y-a.y;var d=this.checkOffset(new t(b,a),this.newScale);this.isBlockDraging=d.x!=b||d.y!=a;var e=a-d.y;b-=.7*(b-d.x);a-=.7*e;this.oldX=this.newX;this.newX=b;this.speedX=.7*(this.newX-this.oldX);this.oldY=this.newY;this.newY=a;this.speedY=.7*(this.newY-this.oldY);this.origin=new t(b,a);this.viewTranslate=new t(b,a);return this.draging=!0},get isSubContentActiv(){return this.videoWrap?!0:!1},action:function(a){if(this.item)switch(a){case "click":if("video"==
this.item.type){if(this.videoWrap)return this.removeVideoContent(),"videoStop";this.view.classList.add("video_play");this.view.classList.remove("info_icon");this.addVideoContent();return"videoPlay"}if("audio"==this.item.type)return this.tryPlayOrPauseMp3(),"audioPlay";break;case "removeSubContent":if("video"==this.item.type)return this.removeVideoContent(),"videoStop";"audio"==this.item.type&&this.audioPlayer&&!this.audioPlayer.paused&&(this.audioPlayer.pause(),this.iconHolder.firstChild.classList.remove("gmAlbusListRotate"))}},
addVideoContent:function(){var a=this.item.mime_type.split("/")[1];if(a)switch(this.videoWrap||(this.videoWrap=document.createElement("div"),this.videoWrap.className="gmedia_video_wrap",this.videoWrapFrame=this.imageFrame,this.itemInner.appendChild(this.videoWrap),this.view.appendChild(this.delegate.closeButton)),a){case "youtube":this.videoWrap.innerHTML='<iframe src="https://www.youtube.com/embed/%id%?rel=0&showinfo=0&autoplay=1&wmode=transparent" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'.replace("%id%",
this.item.videoId);break;case "vimeo":this.videoWrap.innerHTML='<iframe src="https://player.vimeo.com/video/%id%?byline=0&portrait=0&autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'.replace("%id%",this.item.videoId)}},removeVideoContent:function(){this.videoWrap&&(this.delegate.buttonsBox.appendChild(this.delegate.closeButton),this.view.classList.remove("video_play"),this.videoWrap.parentNode&&this.videoWrap.parentNode.removeChild(this.videoWrap),this.videoWrap=
void 0,this.view.classList.remove("video_play"),"image"!=this.item.type&&this.view.classList.add("info_icon"))},tryPlayOrPauseMp3:function(){if("audio"==this.item.type){if(!this.audioPlayer){if(!document.getElementById("gmAudioPlayer"))return;this.audioPlayer=document.getElementById("gmAudioPlayer")}this.audioPlayer.src==this.item.url?this.audioPlayer.paused?(this.audioPlayer.play(),this.iconHolder.firstChild.classList.add("gmAlbusListRotate")):(this.audioPlayer.pause(),this.iconHolder.firstChild.classList.remove("gmAlbusListRotate")):
(this.audioPlayer.src=this.item.url,this.audioPlayer.play(),this.iconHolder.firstChild.classList.add("gmAlbusListRotate"))}}};da.prototype={get viewOfsetY(){return this.view.getBoundingClientRect().top-document.body.getBoundingClientRect().top},get viewOfsetX(){return this.view.getBoundingClientRect().left-document.body.getBoundingClientRect().left},copyRight:function(a){var b=this,d=void 0;return function(a){if(!H.ios||"mouseup"!=a.type){var c=void 0,e=void 0;a.changedTouches&&a.changedTouches[0]?
(c=a.changedTouches[0].pageX,e=a.changedTouches[0].pageY):(c=a.pageX,e=a.pageY);c-=b.viewOfsetX;e-=b.viewOfsetY;var h=b.itemsList[b.itemIndex];if(h.webView&&h.webView==a.target){a.preventDefault();var m=document.getElementById("gm_copyr");m&&(clearTimeout(d),m.parentNode.removeChild(m),m=null);m=document.createElement("div");m.id="gm_copyr";m.className="gmAlbumsViewFL_hints";m.innerHTML=h.user&&h.user.displayname?"Hey, this photo is &#169; "+h.user.displayname:"This I can not give you.";m.style.top=
e+"px";m.style.left=c+"px";b.view.appendChild(m);d=setTimeout(function(){m.parentNode.removeChild(m)},1E3)}}}},addToStage:function(){var a=this,b=document.getElementsByTagName("body")[0];document.getElementsByTagName("html");this.view.style.zIndex=B(b)+1;Y();document.addEventListener("contextmenu",this.copyR,!1);c(this.appName).appEventManager.addGMEventListener(r.FULLSCREEN_SWITCH,this,"fullscreenSwitch");b.appendChild(this.view);setTimeout(function(){a.view.classList.add("gmAlbumsViewFL_ColectionSliderActivate")},
30)},initByList:function(a,b){if(a&&0<a.length){var d=this;this.currentItemIndex=b&&0!==b?0:void 0;this.startItemIndex=b?b:0;this.itemsList=a;setTimeout(function(){d.createLayout()},400)}},prepareToRemove:function(){if(!this.removing){var a=this.scrollViewTranslateY/(this.size.height/2);this.pageInFocus.isSubContentActiv&&.2>a?"videoStop"==this.pageInFocus.action("click")&&(this.switchShowControlls(),this.needHideControlls=!this.isControllsShow):(this.removing=!0,U.init(),window.removeEventListener("wheel",
this.handlerMWheel,!1),document.removeEventListener("keydown",this.handlerKB,!0),document.removeEventListener("contextmenu",this.copyR,!1),c(this.appName).appEventManager.removeGMEventListener(r.FULLSCREEN_SWITCH,this,"fullscreenSwitch"),this.delegate.itemsCountersUpdate(),this.subMenu&&this.showSubmenu&&(this.subMenu.style.transition="0s",this.needShowSubmenu(!1)),Z(),this.view.classList.remove("gmAlbumsViewFL_ColectionSliderActivate"),document.getElementById("gmAudioPlayer")&&document.getElementById("gmAudioPlayer").pause(),
c(this.appName).appEventManager.dispatchGMEvent(new n(r.REMOVE_LIGHTBOX,this)))}},deHandler:function(a){var b=this;b.handlerKB=function(a){switch(a.keyCode){case 37:b.gotoPrev();break;case 39:b.gotoNext();break;case 27:if(b.delegate.modal){b.delegate.modal.prepareToRemove();break}b.prepareToRemove();break;case 32:if(b.delegate.modal)b.delegate.modal.prepareToRemove();else return b.switchShowControlls(),b.needHideControlls=!b.isControllsShow,E(a),!1}};return b.handlerKB},showPreloader:function(a){var b=
void 0;a?document.getElementById(this.appName+"slider_preloader")||(b=L(p(c(this.appName).sliderPreloaderColor,.7)),b.id=this.appName+"slider_preloader",this.view.appendChild(b)):(b=document.getElementById(this.appName+"slider_preloader"))&&V(b,function(){b&&b.parentNode&&b.parentNode.removeChild(b)},500)},createLayout:function(){var a=this;this.itemsAmount=this.itemsList.length;this.size=new u(a.view.clientWidth,a.view.clientHeight);A&&this.slider.classList.add("miniScreen");500>a.size.width&&(this.prevButton.classList.add("sliderNextPrevButtonsMiniScreen"),
this.nextButton.classList.add("sliderNextPrevButtonsMiniScreen"));this.initSlider();this.thumbsBar&&(this.thumbsBar.initItemsList(this.itemsList),this.thumbsBar.selectThumbByIndex(this.itemIndex));700>a.size.height&&this.slider.classList.add("miniScreen");document.addEventListener("keydown",a.deHandler(),!0);window.addEventListener("wheel",a.mouseWheelHandler(),!1);setTimeout(function(){a.showControlls(!0)},500)},set itemIndex(a){this._itemNum=a;this.updateControlls()},get itemIndex(){return this._itemNum},
initSlider:function(){var a;if(0==this.sliderPages.length)for(a=0;3>a;a++){var b=new ca(this);this.slider.appendChild(b.view);this.sliderPages.push(b);b.resize()}var d=2<this.itemsAmount?-1:0;for(a=0;3>a;a++)b=this.sliderPages[a],b.posX=d,b.itemIndex=void 0,d+=1;this.startDragHandler?this.gotoPageByNum(0):(this.startDragHandler=this.startDrag(),this.slider.addEventListener("touchstart",this.startDragHandler,z),this.slider.addEventListener("mousedown",this.startDragHandler,!1),this.gotoPageByNum(this.startItemIndex))},
set scrollViewTranslateY(a){this._scrollViewTranslateY=a;this.slider.style.transform="translate3d("+this.scrollViewTranslateX+"px,"+a+"px, 0px";0!=a&&this.sliderVerticalRender()},get scrollViewTranslateY(){return this._scrollViewTranslateY},set scrollViewTranslateX(a){this._scrollViewTranslateX=a;this.slider.style.transform="translate3d("+a+"px,"+this.scrollViewTranslateY+"px, 0px";this.pageRenderByIndex(-Math.round(a/this.size.width))},get scrollViewTranslateX(){return this._scrollViewTranslateX},
sliderVerticalRender:function(){var a=1-Math.abs(this.scrollViewTranslateY)/(this.size.height/2);this.background.style.opacity=a;this.needHideControlls||(.8>a?this.showControlls(!1):this.showControlls(!0))},gotoPageByNum:function(a){!this.itemIndex&&0!==this.itemIndex||!this.currentItemIndex?this.gotoPageByIndex(a,!0):this.gotoPageByIndex(this.currentItemIndex-(this.itemIndex-a))},gotoNext:function(){this.gotoPageByIndex(this.currentItemIndex+1)},gotoPrev:function(){this.gotoPageByIndex(this.currentItemIndex-
1)},renderTransformTo:function(a){function b(){c=.2*c+.15*(a.x-d.scrollViewTranslateX);g=.2*g+.15*(a.y-d.scrollViewTranslateY);d.scrollViewTranslateX+=c;d.scrollViewTranslateY+=g;1>Math.abs(c)&&1>Math.abs(g)&&(d.dragging=!1);.1>Math.abs(c)&&.1>Math.abs(g)?(w(d.animaSliderRender),d.scrollViewTranslateX=a.x,d.scrollViewTranslateY=a.y,d.sliderTransitionComplete({target:d.slider})):d.animaSliderRender=x(b)}var d=this;w(d.animaSliderRender);var c=5*d.speedX,g=5*d.speedY;d.animaSliderRender=x(b)},gotoPageByIndex:function(a,
b){3>this.itemsAmount&&(a=Math.max(0,a),a=Math.min(this.itemsAmount-1,a));2<Math.abs(this.currentItemIndex-a)&&(b=!0);a=-a*this.size.width;b?(this.scrollViewTranslateX=a,this.sliderTransitionComplete({target:this.slider})):this.renderTransformTo(new t(a,this.scrollViewTranslateY))},pageRenderByIndex:function(a){if(this.currentItemIndex!==a){void 0!==this.pageInFocus&&(this.pageInFocusPrev=this.pageInFocus,this.pageInFocus.isInScale&&(this.zoomingPage=this.pageInFocus));var b;if(3>this.itemsAmount){for(b=
0;b<this.itemsAmount;b++)this.sliderPages[b].initByItem(this.itemsList[b]);this.pageInFocus=this.sliderPages[a];this.itemIndex=this.currentItemIndex=a}else{var d=(a+1)%3;0>d&&(d+=3);var c=0<=d-1?d-1:2,g=3>d+1?d+1:0,f=[c,d,g],h=[a-1,a,a+1];for(b=0;b<f.length;b++)this.sliderPages[f[b]].posX=h[b];this.currentItemIndex=a;this.pageInFocus=this.sliderPages[d];this.itemIndex=0>a?this.itemsAmount+(0==a%this.itemsAmount?-this.itemsAmount:a%this.itemsAmount):a%this.itemsAmount;this.sliderPages[d].initByItem(this.itemsList[this.itemIndex]);
this.sliderPages[g].initByItem(this.itemIndex+1<this.itemsAmount?this.itemsList[this.itemIndex+1]:this.itemsList[0]);this.sliderPages[c].initByItem(0>this.itemIndex-1?this.itemsList[this.itemsAmount-1]:this.itemsList[this.itemIndex-1])}}},sliderTransitionComplete:function(a){a.target==this.slider&&(a=U.status(),(a.list!==this.itemsList||a.list===this.itemsList&&this.itemIndex>=a.index)&&U.init(this.itemsList,this.itemIndex,20),void 0!==this.pageInFocusPrev&&this.pageInFocusPrev.action("removeSubContent"),
void 0!==this.zoomingPage&&this.zoomingPage!==this.pageInFocus&&this.zoomingPage.normalize())},mouseWheelHandler:function(a){var b=this,d=0,c=0,g=void 0;b.handlerMWheel=function(a){a.stopPropagation();var e=new t(0,0);if("deltaX"in a)1===a.deltaMode?(e.x=18*a.deltaX,e.y=18*a.deltaY):(e.x=a.deltaX,e.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(e.x=-.16*a.wheelDeltaX),e.y=a.wheelDeltaY?-.16*a.wheelDeltaY:-.16*a.wheelDelta;else if("detail"in a)e.y=a.detail;else return;var f=b.size.width/2,k=
b.size.height/2;a.pageX&&(f=a.pageX,k=a.pageY);f-=b.viewOfsetX;k-=b.viewOfsetY;if(!b.dragging){g!==b.pageInFocus&&(g=void 0);b.zoomingPage&&b.zoomingPage!==b.pageInFocus&&(b.zoomingPage.normalize(),b.zoomingPage=void 0);g||(b.needHideControlls=b.isControllsShow,g=b.zoomingPage=b.pageInFocus);if(f!=d||k!=c)g.startDrag(new t(f,k)),d=f,c=k;g.zoomByScaleIter(e.y,new t(f,k));g.isInScale?b.showControlls(!1):(b.showControlls(b.needHideControlls),g=void 0)}};return b.handlerMWheel},doubleClickController:function(a){if(!H.ios||
"mouseup"!=a.type){var b=void 0,d=void 0;a.changedTouches&&a.changedTouches[0]?(b=a.changedTouches[0].pageX,d=a.changedTouches[0].pageY):(b=a.pageX,d=a.pageY);b-=this.viewOfsetX;d-=this.viewOfsetY;var c=this.pageInFocus.is_pointInItem(new t(b,d)),g=this;this.firsrTap?(clearTimeout(this.firsrTap),this.firsrTap=void 0,c&&(this.pageInFocus.isInScale?(g.showControlls(g.needHideControlls),this.pageInFocus.normalize(!0),this.zoomingPage=void 0):(this.zoomingPage&&this.zoomingPage.normalize(),this.zoomingPage=
this.pageInFocus,this.zoomingPage.zoomIn(.3>Math.abs(this.zoomingPage.imgScale-1)?1.5:this.zoomingPage.imgScale,new t(b,d)),this.zoomingPage.isInScale&&(g.needHideControlls=g.isControllsShow,g.showControlls(!1))))):this.firsrTap=setTimeout(function(){g.firsrTap=void 0;if(c||A)if(g.pageInFocus.isInScale)g.pageInFocus.normalize(!0),g.showControlls(g.needHideControlls),g.zoomingPage=void 0;else switch(g.pageInFocus.action("click")){case "videoPlay":g.showControlls(!1);g.needHideControlls=!g.isControllsShow;
break;case "videoStop":g.switchShowControlls();g.needHideControlls=!g.isControllsShow;break;default:g.switchShowControlls(),g.needHideControlls=!g.isControllsShow}else g.prepareToRemove()},300)}},startDrag:function(a){function b(a){a.originalEvent&&(a=a.originalEvent);a.preventDefault();if(a.touches)if(!c.dragging&&1<a.touches.length){n=!0;var b=a.touches[0].pageX;var d=a.touches[0].pageY;var e=a.touches[1].pageX;a=a.touches[1].pageY;var g=Math.hypot(b-e,d-a);b+=(e-b)/2;d+=(a-d)/2}else n=!1,b=a.touches[0].pageX,
d=a.touches[0].pageY;else b=a.pageX,d=a.pageY;b-=v;d-=r;if(!(H.ios&&20>=f))if(void 0===l&&(d===h?l=!1:(e=180*Math.atan2(Math.abs(d-h),Math.abs(b-f))/Math.PI,l=45<e)),!c.dragging&&c.zoomingPage){e=4<Math.abs(f-b)?f-b:0;a=4<Math.abs(h-d)?h-d:0;if(e||a)c.zoomingDrag=!0;n?c.pageInFocus.zoomByScaleDeltaToPoint(g,new t(e,a),new t(b,d)):c.zoomingPage&&c.zoomingPage.dragin(new t(e,a))}else if(l){u=0;if(b=4<Math.abs(h-d)?h-d:0)c.dragging=!0;c.scrollViewTranslateY=k-b}else{c.transition=!0;if(b=4<Math.abs(f-
b)?f-b:0)c.dragging=!0;c.scrollViewTranslateX=m-b;x=y;y=c.scrollViewTranslateX;u=y-x}}function d(a){a.preventDefault();l=void 0;q()&&(document.removeEventListener("touchmove",b,z),document.removeEventListener("touchend",d,z));document.removeEventListener("mousemove",b,!1);document.removeEventListener("mouseup",d,!1);document.removeEventListener("oncontextmenu",d,!1);if(c.dragging||n||c.zoomingDrag){if(c.zoomingPage)c.zoomingPage.stopDrag(),n=!1;else if(4>Math.abs(c.scrollViewTranslateY)){a=c.currentItemIndex;
var e=q()?7:3;Math.abs(u)>e&&g==c.currentItemIndex&&(a=0<u?a-1:a+1);c.speedX=u;c.scrollViewTranslateY=0;c.gotoPageByIndex(a)}else.2<Math.abs(c.scrollViewTranslateY/(c.size.height/2))?c.prepareToRemove():c.renderTransformTo(new t(c.scrollViewTranslateX,0));this.dragging=!1}else c.doubleClickController(a);c.zoomingDrag=!1}var c=this,g=void 0,f=void 0,h=void 0,m=void 0,k=void 0,l=void 0,n=void 0,p=void 0,r=c.viewOfsetY,v=c.viewOfsetX,u=0,x=0,y=0;return function(a){c.zoomingPage=c.pageInFocus.isInScale?
c.pageInFocus:void 0;w(c.animaSliderRender);g=c.currentItemIndex;a.preventDefault();a.originalEvent&&(a=a.originalEvent);if(!a.button||0===a.button){if(a.touches)if(!c.dragging&&1<a.touches.length){n=!0;var e=a.touches[0].pageX;var l=a.touches[0].pageY;var X=a.touches[1].pageX;a=a.touches[1].pageY;p=Math.hypot(e-X,l-a);e+=(X-e)/2;l+=(a-l)/2;c.zoomingPage=c.pageInFocus;c.needHideControlls=c.isControllsShow;c.showControlls(!1)}else e=a.touches[0].pageX,l=a.touches[0].pageY;else e=a.pageX,l=a.pageY;
e-=v;l-=r;x=u=c.speedX=c.speedY=0;y=c.scrollViewTranslateX;f=e;h=l;m=c.scrollViewTranslateX;k=c.scrollViewTranslateY;c.zoomingPage&&c.zoomingPage.startDrag(new t(f,h),p);q()&&(document.addEventListener("touchmove",b,z),document.addEventListener("touchend",d,z));document.addEventListener("mousemove",b,!1);document.addEventListener("mouseup",d,!1);document.addEventListener("oncontextmenu",d,!1)}}},audioPlayerHandler:function(a){this.thumbsBar&&this.thumbsBar.changeAudioStatusForIndex(this.itemIndex,
a)},createControlls:function(){function a(a){a.style.backgroundColor=c(d.appName).sliderNavigationIconColor;a.childNodes[0].style.stroke=c(d.appName).sliderNavigationColor}function b(a){a.style.backgroundColor=c(d.appName).sliderNavigationColor;a.childNodes[0].style.stroke=c(d.appName).sliderNavigationIconColor}var d=this;this.prevButton=document.createElement("div");this.prevButton.className="sliderNextPrevButtons";this.prevButton.style.left="0px";this.prevButton.style.transform="translateX(-120%)";
this.prevButton.style.backgroundColor=c(this.appName).sliderNavigationColor;this.prevButton.style.visibility="hidden";this.prevButton.innerHTML='<svg height="128px" id="Layer_1" style="enable-background:new 0 0 128 128;" version="1.1" viewBox="0 0 128 128" width="128px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="57.12" x2="17.787" y1="103.334" y2="64"/><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="17.787" x2="57.12" y1="64" y2="24.666"/></g><line style="stroke-width:12;stroke-miterlimit:10;" x1="17.787" x2="118.213" y1="64" y2="64"/></g></svg>';
this.prevButton.childNodes[0].style.stroke=c(this.appName).sliderNavigationIconColor;this.prevButton.onmouseover=function(){a(this)};this.prevButton.onmouseout=function(){b(this)};this.prevButton.onclick=function(){d.gotoPrev();H.desktop||b(this)};this.view.appendChild(this.prevButton);this.nextButton=document.createElement("div");this.nextButton.className="sliderNextPrevButtons";this.nextButton.style.backgroundColor=c(this.appName).sliderNavigationColor;this.nextButton.style.right="0px";this.nextButton.style.transform=
"translateX(120%)";this.nextButton.style.visibility="hidden";this.nextButton.innerHTML='<svg height="128px" id="Layer_1" style="enable-background:new 0 0 128 128;" version="1.1" viewBox="0 0 128 128" width="128px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="70.88" x2="110.213" y1="24.666" y2="64"/><line style="stroke-width:12;stroke-linecap:square;stroke-miterlimit:10;" x1="110.213" x2="70.88" y1="64" y2="103.334"/></g><line style="stroke-width:12;stroke-miterlimit:10;" x1="110.213" x2="9.787" y1="64" y2="64"/></g></svg>';
this.nextButton.childNodes[0].style.stroke=c(this.appName).sliderNavigationIconColor;this.nextButton.onmouseover=function(){a(this)};this.nextButton.onmouseout=function(){b(this)};this.nextButton.onclick=function(){d.gotoNext();H.desktop||b(this)};this.view.appendChild(this.nextButton);c(this.appName).sliderThumbBarEnable&&(this.thumbsBar=new ba(this),this.footer.appendChild(this.thumbsBar.view));this.view.appendChild(this.footer);this.view.appendChild(this.header);this.infoBox1=document.createElement("div");
this.infoBox1.className="gmInfoBox1";this.header.appendChild(this.infoBox1);var e={};e.backgroundColor=c(this.appName).sliderThumbSubMenuBackgroundColor;e.backgroundColorOver=c(this.appName).sliderThumbSubMenuBackgroundColorOver;e.iconColor=c(this.appName).sliderThumbSubMenuIconColor;e.iconColorOver=c(this.appName).sliderThumbSubMenuIconHoverColor;this.itemMenu=new T(this.delegate,e,!0);this.buttonsBox=document.createElement("div");this.buttonsBox.className="gmInfoBox1";this.buttonsBox.style.float=
"right";this.buttonsBox.appendChild(this.itemMenu.view);this.header.appendChild(this.buttonsBox);this.closeButton=document.createElement("div");this.closeButton.setAttribute("type","close");this.closeButton.className="sliderItemsButtons";this.closeButton.innerHTML='<svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
this.closeButton.style.backgroundColor=c(this.appName).sliderNavigationColor;this.closeButton.childNodes[0].style.fill=c(this.appName).sliderNavigationIconColor;this.buttonsBox.appendChild(this.closeButton);this.closeButton.onmouseover=function(){this.style.backgroundColor=c(d.appName).sliderNavigationIconColor;this.childNodes[0].style.fill=c(d.appName).sliderNavigationColor};this.closeButton.onmouseout=function(){this.style.backgroundColor=c(d.appName).sliderNavigationColor;this.childNodes[0].style.fill=
c(d.appName).sliderNavigationIconColor};this.closeButton.addEventListener("click",function(){this.parentNode==d.buttonsBox&&d.prepareToRemove()},!1);A&&(this.infoBox2=document.createElement("div"),this.infoBox2.className="gmInfoBox1",this.infoBox2.style.width="100%",this.footer.appendChild(this.infoBox2),this.header.appendChild(this.buttonsBox),this.buttonsBox.style.float="none",this.infoBox1.style.float="none");this.titleItem=document.createElement("div");this.titleItem.className="gmAlbumsViewFL_ColectionSliderItemTitle";
this.titleItem.style.fontSize=c(this.appName).sliderItemTitleFontSize+"px";this.titleItem.style.color=c(this.appName).sliderItemTitleTextColor;A&&(this.titleItem.classList.add("gmAlbumsViewFL_ColectionSliderItemTitleMiniScreen"),this.titleItem.style.fontSize="20px",this.titleItem.style.borderBottom="solid 1px "+p(c(this.appName).sliderNavigationIconColor,.3));this.infoBox1.appendChild(this.titleItem);this.titleTerm=document.createElement("div");this.titleTerm.className="gmAlbumsViewFL_ColectionSliderItemTitle";
this.titleTerm.style.fontSize=c(this.appName).sliderItemTitleFontSize/2+"px";this.titleTerm.style.color=p(c(this.appName).sliderItemTitleTextColor,.7);this.titleTerm.classList.add("gmAlbumsViewFL_ColectionSliderTermTitle");A?(this.titleTerm.classList.add("gmAlbumsViewFL_ColectionSliderTermTitleMiniScreen"),this.titleTerm.style.fontSize="15px",this.infoBox2.appendChild(this.titleTerm)):(this.titleTerm.style.fontSize=c(this.appName).sliderItemTitleFontSize/2+"px",this.infoBox1.appendChild(this.titleTerm))},
fullscreenSwitch:function(a){v(this.view)},switchShowControlls:function(){this.showControlls(!this.isControllsShow)},showControlls:function(a,b){this.isControllsShow!=a&&(b?(this.header.classList.add("gmNoneTransition"),this.footer.classList.add("gmNoneTransition"),this.prevButton.classList.add("gmNoneTransition"),this.nextButton.classList.add("gmNoneTransition")):(this.header.classList.remove("gmNoneTransition"),this.footer.classList.remove("gmNoneTransition"),this.prevButton.classList.remove("gmNoneTransition"),
this.nextButton.classList.remove("gmNoneTransition")),a?(this.header.classList.add("gmAlbumsViewFL_SlidesHeaderActivate"),this.footer.classList.add("gmAlbumsViewFL_SlidesFooterActivate"),this.prevButton.style.transform="translateX(0%)",this.nextButton.style.transform="translateX(0%)"):(this.header.classList.remove("gmAlbumsViewFL_SlidesHeaderActivate"),this.footer.classList.remove("gmAlbumsViewFL_SlidesFooterActivate"),this.prevButton.style.transform="translateX(-120%)",this.nextButton.style.transform=
"translateX(120%)"),this.isControllsShow=a)},updateControlls:function(){3>this.itemsAmount?(this.prevButton.style.visibility=0==this.itemIndex?"hidden":"visible",this.nextButton.style.visibility=this.itemIndex==this.itemsAmount-1?"hidden":"visible",1==this.itemsAmount&&(this.prevButton.style.visibility="hidden",this.nextButton.style.visibility="hidden")):(this.prevButton.style.visibility="visible",this.nextButton.style.visibility="visible");var a=this.itemsList[this.itemIndex];a&&(this.titleItem.innerHTML=
a.title?a.title:"",this.titleTerm.textContent=this.itemIndex+1+" / "+this.itemsAmount,this.itemMenu&&this.itemMenu.updateForItem(a),this.thumbsBar&&this.thumbsBar.selectThumbByIndex(this.itemIndex),this.delegate.modal&&("info"==this.delegate.modal.type?c(this.appName).appEventManager.dispatchGMEvent(new n(r.NEED_MODAL,this,{type:"info",item:a})):this.delegate.modal.prepareToRemove()),this.delegate.viewItem=a)},resizeHandler:function(){var a=this;this.resizeDelay&&clearTimeout(this.resizeDelay);this.resizeDelay=
setTimeout(function(){a.size=new u(a.view.clientWidth,a.view.clientHeight);410>a.size.height&&(a.showControlls(!1,!0),a.needHideControlls=!0);500>a.size.width?(a.prevButton.classList.add("sliderNextPrevButtonsMiniScreen"),a.nextButton.classList.add("sliderNextPrevButtonsMiniScreen")):(a.prevButton.classList.remove("sliderNextPrevButtonsMiniScreen"),a.nextButton.classList.remove("sliderNextPrevButtonsMiniScreen"));a.itemMenu&&a.itemMenu.resizeHandler();for(var b=0;b<a.sliderPages.length;b++)a.sliderPages[b].resize();
a.gotoPageByIndex(a.currentItemIndex,!0);a.thumbsBar&&a.thumbsBar.updateView()},200)}};ea.prototype={updateView:function(){var a=this.delegate.tagsCloud,b=[],d=[],e;for(e in a)"0"!=e&&b.push(a[e].toLowerCase());b.sort();b.splice(0,0,a["0"].toLowerCase());for(e=0;e<b.length;e++)for(var g in a)if(a[g].toLowerCase()==b[e]){var f=this.createTag(g,a[g]);d.push(f);this.list.appendChild(f);delete a[g]}this.selectedTag=document.getElementById(this.id+this.delegate.filtredById);this.selectedTag.style.backgroundColor=
c(this.appName).tagCloudTextColor;this.selectedTag.style.color=c(this.appName).tagCloudBgColor;this.selectedTag.style.cursor="default"},createTag:function(a,b){function d(a){var b=this.id.split("_")[this.id.split("_").length-1];if(e.selectedTag!=this)switch(a.type){case "click":e.selectedTag=document.getElementById(e.id+e.delegate.filtredById);e.selectedTag.style.color=c(e.appName).tagCloudTextColor;e.selectedTag.style.backgroundColor=c(e.appName).tagCloudBgColor;e.selectedTag.style.cursor="pointer";
e.delegate.filtred(b);e.selectedTag=document.getElementById(e.id+e.delegate.filtredById);e.selectedTag.style.cursor="default";break;case "mouseenter":this.style.backgroundColor=c(e.appName).tagCloudTextColor;this.style.color=c(e.appName).tagCloudBgColor;break;case "mouseleave":this!=e.selectedTag&&(this.style.color=c(e.appName).tagCloudTextColor,this.style.backgroundColor=c(e.appName).tagCloudBgColor)}}var e=this,g=document.createElement("li");g.appendChild(document.createTextNode(b));g.id=this.id+
a;g.style.color=c(this.appName).tagCloudTextColor;g.style.backgroundColor=c(this.appName).tagCloudBgColor;g.addEventListener("click",d,!1);g.addEventListener("mouseenter",d,!1);g.addEventListener("mouseleave",d,!1);return g}};T.prototype={updateForItem:function(a){this.item=a;this.delegate.likesSet&&this.likeButton&&(this.delegate.likesSet[a.ID]?(this.likeButton.getElementsByTagName("svg")[0].style.fill="red",this.likeButton.style.cursor="default",this.likeButton.style.pointerEvents="none",this.likeButton.setAttribute("like",
a.ID)):(this.likeButton.childNodes[0].style.fill=this.iconColor,this.likeButton.style.cursor="pointer",this.likeButton.style.pointerEvents="all",this.likeButton.removeAttribute("like")));a.link?(this.linkButton.style.display="block",this.linkButton.style.opacity="1",this.linkButton.style.cursor="pointer",this.linkButton.style.pointerEvents="all"):(this.linkButton.style.opacity="0",this.linkButton.style.display="none",this.linkButton.style.cursor="default",this.linkButton.style.pointerEvents="none")},
resizeHandler:function(){var a=document.webkitIsFullScreen||document.mozFullScreen||!1;this.fullscreenButton&&(this.fullscreenButton.innerHTML=a?'<svg height="14px" version="1.1" viewBox="0 0 14 14" width="14px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><g fill-rule="evenodd" stroke="none" stroke-width="1"><g id="Core" transform="translate(-257.000000, -257.000000)"><g id="fullscreen-exit" transform="translate(257.000000, 257.000000)"><path d="M0,11 L3,11 L3,14 L5,14 L5,9 L0,9 L0,11 L0,11 Z M3,3 L0,3 L0,5 L5,5 L5,0 L3,0 L3,3 L3,3 Z M9,14 L11,14 L11,11 L14,11 L14,9 L9,9 L9,14 L9,14 Z M11,3 L11,0 L9,0 L9,5 L14,5 L14,3 L11,3 L11,3 Z" id="Shape"/></g></g></g></svg>':
'<svg height="14px" version="1.1" viewBox="0 0 14 14" width="14px" xmlns="http://www.w3.org/2000/svg" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" xmlns:xlink="http://www.w3.org/1999/xlink"><title/><desc/><defs/><g fill-rule="evenodd" id="Page-1" stroke="none" stroke-width="1"><g transform="translate(-215.000000, -257.000000)"><g id="fullscreen" transform="translate(215.000000, 257.000000)"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z" id="Shape"/></g></g></g></svg>',
this.fullscreenButton.childNodes[0].style.fill=this.iconColor)}};K.prototype={init:function(){this.startRequest();J(JSON.stringify({library:this.query}),this,r.COLLECTION_DATA_REDY)},startRequest:function(){this.showPreloader(!0)},showPreloader:function(a){a?0<this.view.getElementsByClassName("gmAlbumsViewFL_Preloader").length||(a=L(p(c(this.appName).collectionPreloaderColor,.7)),this.view.appendChild(a)):this.view.getElementsByClassName("gmAlbumsViewFL_Preloader")[0]&&(a=this.view.getElementsByClassName("gmAlbumsViewFL_Preloader")[0],
this.view.removeChild(a))},dataLoaded:function(a){if(a=a.params.data){try{var b=JSON.parse(a);b.key&&""!=b.key?c(this.appName).key=b.key:(c(this.appName).tv=document.createElement("div"),c(this.appName).tv.style.position="absolute",c(this.appName).tv.style.height="24px",c(this.appName).tv.innerHTML='<a href="http://bit.ly/2snVAca" style="background-color: rgba(0, 0, 0, 0.8) !important;position: relative !important;left: auto!important;right: auto!important;top: auto!important;bottom: auto!important;width:auto!important;height:auto!important;text-indent:0!important;overflow:visible!important;display:block!important;padding: 4px 10px!important;margin:0 0 -3em 0!important;font-size:14px!important;line-height:120%!important;color:#FFFFFF!important;font-weight:bold!important;visibility:visible!important;opacity:1!important;pointer-events:auto!important;transform:none!important;">Trial version - Gmedia WP Plugin</a>');
a=[];if(b.properties){b.properties.category__in&&a.push(b.properties.category__in);b.properties.album__in&&a.push(b.properties.album__in);b.properties.tag__in&&a.push(b.properties.tag__in);if(1==a.length)for(key in a[0])this.term=new F(a[0][key],this.appName),this.terms.push(this.term);else 0==a.length&&b.properties.request&&"s"==b.properties.request.taxonomy&&b.properties.request.term_id&&(this.term=new F({name:b.properties.request.term_id,taxonomy:"s",count:b.properties.count},this.appName));this.createTermsCollectionAndUpdateProperties(b.properties)}b.data&&
this.addItemsToCollection(b.data)}catch(d){P(d)}this.showPreloader(!1);this.properties&&(this.viewWidth=this.view.clientWidth,this.updateViewByData())}},createTermsCollectionAndUpdateProperties:function(a){this.properties||(this.properties={});for(var b in a)if("album__in"==b||"categoy__in"==b||"tag__in"==b){var c=this.properties,e=b,g=void 0,f=a[b],h={};for(g in f){var m=new F(f[g],this.appName);h[m.term_id]=m}c[e]=h}else this.properties[b]=a[b]},addItemsToCollection:function(a){this.lastPageItems=
[];for(var b=0;b<a.length;b++){var c=new Q(a[b],this.appName);c.index=this.itemsList.length+b;if(c.tags&&0<c.tags.length)for(var e=0;e<c.tags.length;e++){var g=c.tags[e];this.tagsCloud&&(this.tagsCloud[g.term_id]=g.name)}this.lastPageItems.push(c)}this.itemsList=this.itemsList.concat(this.lastPageItems)},itemAction:function(a,b){if(!this.dragging){var d=this.filteredCollection[a];switch(b){case "lightBox":c(this.appName).appEventManager.dispatchGMEvent(new n(r.NEED_LIGHTBOX,this,{collection:this,
index:a}));break;case "share":c(this.appName).appEventManager.dispatchGMEvent(new n(r.NEED_MODAL,self,{type:"share",item:d}));break;case "link":d.link&&window.open(d.link,c(this.appName).linkTargetWindow);break;case "coments":window.open(d.sharelink+"/#comments",c(this.appName).linkTargetWindow);break;case "like":this.delegate.likeItem=d;break;case "bookmark":this.delegate.bookmarkItem=d}}},refteshDataInItem:function(){for(var a=0;a<this.filteredCollection.length;a++)this.filteredCollection[a].view.updateSomeData()},
activate:function(){this.updateLayout();(this.scrollHandler=this.scrollHandlerFunction())&&window.addEventListener("scroll",this.scrollHandler,!1)},deactivate:function(){c(this.appName).appEventManager.removeGMEventListener(r.COLLECTION_DATA_REDY,this,"dataLoaded");window.removeEventListener("scroll",this.scrollHandler,!1);this.scrollHandler=void 0;this.removePresentedItems()},removeItemViewFormStage:function(){this.removePresentedItems();this.presentedList=[];this.currentPage=void 0},removePresentedItems:function(){for(var a=
0;a<this.presentedList.length;a++)this.presentedList[a].display="none"},showPresentedItems:function(){for(var a=0;a<this.presentedList.length;a++)this.presentedList[a].display="block"},createLayout:function(){this.scrollHandler||(this.scrollHandler=this.scrollHandlerFunction())&&(window.addEventListener?window.addEventListener("scroll",this.scrollHandler,!1):window.attachEvent&&window.attachEvent("onscroll",this.scrollHandler));this.page_Amount=Math.min(20,this.filteredCollection.length)},updateLayout:function(){},
scrollHandlerFunction:function(){var a=this;return function(){200>a.bottomSpace&&a.addPageToStage()}},get bottomSpace(){return this.content.getBoundingClientRect().bottom-window.innerHeight},resize:function(){var a=this;clearTimeout(this.resizeTimeOut);q()?this.resizeTimeOut=setTimeout(function(){a.resizeDelay()},150):this.resizeDelay()},resizeDelay:function(){this.viewWidth!=this.view.clientWidth&&(this.updateLayout(),this.viewWidth=this.view.clientWidth)},filtred:function(a){window.removeEventListener("scroll",
this.scrollHandler,!1);this.scrollHandler=void 0;this.removeItemViewFormStage();this.filtredById=a;this.createLayout()},updateTagsCloud:function(){0!=this.filteredCollection.length&&(this.tagsCloudView||(this.tagsCloudView=new ea(this),this.header.appendChild(this.tagsCloudView.view)),this.tagsCloud&&this.tagsCloudView.updateView())},set filtredById(a){if(this.itemsList&&(this.filteredList=[],this._filter=a,0!==a))for(var b=0;b<this.itemsList.length;b++){var c=this.itemsList[b];c.hasTag(a)&&this.filteredList.push(c)}},
get filtredById(){return this._filter},get filteredCollection(){return 0<this.filteredList.length?this.filteredList:this.itemsList}};fa.prototype={init:function(){function a(a){switch(a.type){case "mouseenter":this.classList.add("hover");g.updateForItem(b);d.menuHolder.appendChild(g.view);break;case "mouseleave":this.classList.remove("hover")}}var b=this.delegate.itemsList[this.index];this.thumbSize=b.itemViewThumbSize;this.type=ma(b.mime_type);this.itemViewSrc=!1;this.img=new Image;var d=this;this.img.onload=
function(){this.setAttribute("alt",b.title);"audio"!=d.type&&1.1<d.view.clientWidth/this.naturalWidth&&b.itemViewSrc&&!d.itemViewSrc&&(this.src=b.itemViewSrc,d.itemViewSrc=!0);d.view.style.opacity=1};this.view.appendChild(this.img);this.img.src=b.itemViewThumbSrc;this.hover=document.createElement("div");this.hover.className="gmAlbumsViewFL_MasonryCollection_Item_Hover";this.hover.style.backgroundColor=c(this.appName).collectionThumbHoverColor;this.hover.style.top=this.hover.style.bottom=this.hover.style.left=
this.hover.style.right=this.space;this.view.appendChild(this.hover);this.inner=document.createElement("div");this.inner.className="gmAlbumsViewFL_MasonryCollection_Item_Inner";this.inner.style.top=this.inner.style.bottom=this.inner.style.left=this.inner.style.right=this.space;this.view.appendChild(this.inner);if(c(this.appName).lightBoxEnable){this.inner.style.cursor="zoom-in";this.inner.addEventListener("click",function(a){"gmAlbumsViewFL_MasonryCollection_Item_Inner"==a.target.className&&(d.view.classList.remove("hover"),
d.delegate.itemAction(d.index,"lightBox"))});var e=document.createElement("div");e.className="gm_item_badge";switch(b.type){case "video":"vimeo"==b.mime_type.split("/")[1]?(e.innerHTML='<svg enable-background="new 0 0 56.693 56.693" height="56.693px" id="Layer_1" version="1.1" viewBox="-5 -5 66.693 66.693" width="56.693px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M3.602,22.974l2.01,2.636c0,0,4.146-3.267,5.528-1.634c1.382,1.634,6.656,21.357,8.417,24.997  c1.537,3.192,5.777,7.413,10.426,4.397c4.646-3.014,20.098-16.205,22.863-31.781c2.764-15.574-18.594-12.313-20.854,1.256  c5.652-3.395,8.671,1.38,5.778,6.784c-2.889,5.399-5.527,8.921-6.908,8.921c-1.379,0-2.441-3.612-4.021-9.928  c-1.635-6.53-1.624-18.291-8.416-16.958C12.019,12.921,3.602,22.974,3.602,22.974z"/></svg>',
e.firstChild.style.fill="#00adef"):(e.innerHTML='<svg data-name="Layer 21" height="24" id="Layer_21" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><title/><path d="M21.80731,7.805a2.79915,2.79915,0,0,0-2.54907-2.53906C17.69061,5.13586,15.36707,5,12.50012,5c-3.45251,0-6.05865.14105-7.74353.27332A2.79932,2.79932,0,0,0,2.1925,7.815C2.08936,8.90021,2,10.33344,2,12.0423c0,1.66632.08862,3.07422.19128,4.14594a2.79852,2.79852,0,0,0,2.56384,2.53833C6.43994,18.85883,9.04657,19,12.50012,19c2.86694,0,5.19049-.13586,6.75812-.266a2.799,2.799,0,0,0,2.54907-2.539C21.91052,15.11548,22,13.69189,22,12S21.91052,8.88452,21.80731,7.805ZM9.77594,14.93878V9.06122L15.574,12Z"/></svg>',
e.firstChild.style.fill="#e02f2f");this.inner.appendChild(e);break;case "audio":e.innerHTML='<svg version="1.1" viewBox="0 0 58 94" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M37.992,0h-8.021v65.358c-4.435-1.706-10.174-1.73-15.835,0.328C3.994,69.377-2.049,78.355,0.638,85.736   c2.688,7.383,13.088,10.374,23.229,6.683c8.614-3.134,14.249-10.082,14.111-16.626l0.014-53.451   c13.986,2.204,14.943,19.884,13.268,24.842c-0.636,1.879,0.484,3.286,2.598,0C68.938,23.726,37.992,13.376,37.992,0z"/></g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/></svg>',
e.firstChild.style.fill="#4a4a4a",this.inner.appendChild(e)}}this.menuHolder=document.createElement("div");this.menuHolder.className="gmAlbumsViewFL_MasonryCollection_Item_MenuHolder";this.inner.appendChild(this.menuHolder);c(this.appName).collectionThumbTitleShow&&b.title&&0<b.title.length&&(e=document.createElement("div"),e.className="item_title",e.innerHTML=b.title,this.inner.appendChild(e));var g=this.delegate.itemMenu;this.view.addEventListener("mouseenter",a,!1);this.view.addEventListener("mouseleave",
a,!1)},set display(a){"none"==a&&clearTimeout(this.opacityDelay);this._display=this.view.style.display=a},get display(){return this._display},set opacity(a){var b=this;a.delay?this.opacityDelay=setTimeout(function(){b.view.style.opacity=a.opacity},a.delay):(clearTimeout(this.opacityDelay),b.view.style.opacity=a.opacity)}};O.prototype=Object.create(K.prototype,{updateViewByData:{value:function(){if(this.lastPageItems&&0<this.lastPageItems.length)for(var a=0;a<this.lastPageItems.length;a++){var b=new fa(this,
this.lastPageItems[a].index);this.lastPageItems[a].view=b;b.init()}c(this.appName).tagsFilter&&this.updateTagsCloud();this.createLayout()}},createLayout:{value:function(){K.prototype.createLayout.apply(this,arguments);this.createColumns();this.addPageToStage()}},updateLayout:{value:function(){if(0==this.createColumns())this.presentedList&&this.presentedList[0]&&"none"==this.presentedList[0].display&&this.showPresentedItems();else{this.removePresentedItems();for(var a=0;a<this.presentedList.length;a++)this.arangeItemToColum(this.presentedList[a])}}},
createColumns:{value:function(){var a=Math.floor(this.content.clientWidth/Math.min(this.content.clientWidth,c(this.appName).collectionThumbRecomendedWidth));if(this.columnsArr.length!=a){for(var b=0;b<this.columnsArr.length;b++)this.content.removeChild(this.columnsArr[b]);this.columnsArr=[];this.columnsHeightsArr=[];for(b=0;b<a;b++){var d=document.createElement("div");d.className="collectionColumn";d.style.width=100/a+"%";this.columnsArr.push(d);this.columnsHeightsArr.push(0);this.content.appendChild(d)}return!0}return!1}},
addPageToStage:{value:function(){void 0===this.currentPage&&(this.currentPage=0);clearTimeout(this.layoutSizerDelay);if(!(this.currentPage>=Math.ceil(this.filteredCollection.length/this.page_Amount))){for(var a=this.currentPage*this.page_Amount,b=Math.min(a+this.page_Amount,this.filteredCollection.length),c=1;a<b;a++){var e=this.filteredCollection[a].view;e.index=a;e.opacity={opacity:0,delay:0};this.addItemToStage(e);e.opacity={opacity:1,delay:100*c};c+=1}this.currentPage+=1;var g=this;this.layoutSizerDelay=
setTimeout(function(){200>g.bottomSpace&&g.addPageToStage()},1E3)}}},getColumWithMinHeight:{value:function(){for(var a=this.columnsHeightsArr[0],b=0,c=1;c<this.columnsHeightsArr.length;c++)a!=Math.min(a,this.columnsHeightsArr[c])&&(a=Math.min(a,this.columnsHeightsArr[c]),b=c);return b}},removePresentedItems:{value:function(){K.prototype.removePresentedItems.apply(this,arguments);for(var a in this.columnsHeightsArr)this.columnsHeightsArr[a]=0}},arangeItemToColum:{value:function(a){var b=a.view,c=this.getColumWithMinHeight();
this.columnsHeightsArr[c]+=a.thumbSize.height/a.thumbSize.width*this.itemWidth;this.columnsArr[c].appendChild(b);a.display="block"}},addItemToStage:{value:function(a){this.arangeItemToColum(a);this.presentedList.push(a)}},itemWidth:{get:function(){var a=Math.floor(this.content.clientWidth/c(this.appName).collectionThumbRecomendedWidth);return this.content.clientWidth/a}}});O.prototype.constructor=O;ha.prototype={addToStage:function(){var a=this;this.windowScrollY=window.scrollY;var b=document.getElementsByTagName("body")[0],
c=document.getElementsByTagName("html")[0];c.classList.add("gmAlbumsViewFLPopUpActiveTransition");this.view.style.zIndex=B(b)+1;b.appendChild(this.view);document.getElementsByTagName("html")[0].classList.add("gmAlbumsViewFLPopUpActive");var e=a.header.clientHeight,g=window.innerHeight;q()?a.content.style.minHeight=g-e+1+"px":a.content.style.minHeight=g-e+"px";setTimeout(function(){a.animeBG.style.transform="translateY(0px)";a.header.style.transform="translateY(0px)"},3);setTimeout(function(){window.scrollTo(0,
0);for(var d=a.view,e=[],g=0;g<b.childNodes.length;g++){var k={},l=b.childNodes[g];1==l.nodeType&&"SCRIPT"!=l.nodeName&&l!==d&&(k.element=l,k.height=null,k.overflow=null,""!=l.style.height&&(k.height=l.style.height),""!=l.style.overflow&&(k.overflow=l.style.overflow),e.push(k),l.style.overflow="hidden",l.style.height="0")}a.bodyElements=e;c.classList.remove("gmAlbumsViewFLPopUpActiveTransition");a.view.classList.add("gmContent");a.content.style.visibility="visible";a.createCollectionView()},700);
document.addEventListener("keydown",a.keydownHandler(),!1);this.scrollHandler=this.scrollControll();window.addEventListener("scroll",this.scrollHandler)},prepareToRemove:function(){var a=this;a.delegate.modal?a.delegate.modal.prepareToRemove():a.delegate.slider?a.delegate.slider.prepareToRemove():!this.removing&&this.gallery&&(this.removing=!0,this.delegate.removeCollectionDeepLink(this.term),this.gallery.deactivate(),this.header.style.visibility="hidden",this.fixedHeader.style.visibility="hidden",
this.content.style.opacity="0",delete this.gallery,document.removeEventListener("keydown",this.handlerKB),window.removeEventListener("scroll",this.scrollHandler),oa(a.bodyElements),a.bodyElements.length=0,a.view.classList.remove("gmContent"),window.scrollTo(0,a.windowScrollY),a.animeBG.style.transform="translateY(-100%)",document.getElementsByTagName("html")[0].classList.remove("gmAlbumsViewFLPopUpActive"),setTimeout(function(){c(a.appName).appEventManager.dispatchGMEvent(new n(r.REMOVE_COLLECTION,
null))},500))},keydownHandler:function(a){var b=this;b.handlerKB=function(a){switch(a.keyCode){case 27:b.prepareToRemove()}};return b.handlerKB},scrollControll:function(){var a=this.header.clientHeight-30,b=this;return function(c){window.pageYOffset>a?b.showFixedHeader(!0):b.showFixedHeader(!1)}},showFixedHeader:function(a){this.isShowFixedHeder!=a&&(a?(this.header.style.minHeight=this.header.clientHeight+"px",this.title&&this.fixedHeader.appendChild(this.title),this.shareMenu&&this.fixedHeader.appendChild(this.shareMenu),
this.closeButton&&this.fixedHeader.appendChild(this.closeButton),this.fixedHeader.classList.add("gmShow")):(this.fixedHeader.classList.remove("gmShow"),this.title&&this.header.insertBefore(this.title,this.header.childNodes[0]),this.shareMenu&&this.header.appendChild(this.shareMenu),this.closeButton&&this.header.appendChild(this.closeButton),this.header.style.minHeight=null),this.isShowFixedHeder=a)},createCollectionView:function(){var a=void 0;switch(this.term.taxonomy){case "gmedia_album":a="album__in";
break;case "gmedia_category":a="category__in";break;case "gmedia_tag":a="tag__in"}var b={per_page:0,admin:!1,page:1};b[a]=[this.term.term_id];this.gallery=new O(this.delegate,this.appName,b);this.content.appendChild(this.gallery.view);this.gallery.init()},resizeHandler:function(){this.gallery&&this.gallery.resize()}};ia.prototype={view:function(){function a(a){switch(a.type){case "click":c(b.appName).appEventManager.dispatchGMEvent(new n(r.TERMS_COVER_HANDLER,b,{type:"click",terms_set:b.terms_set}));
break;case "mouseover":b.delegate.hoverItemIndex=b.index;b.delegate.hoverItemTaxonomy=b.terms_set;g.style.backgroundColor=p(c(b.appName).coverTagsBgColor2,1);f.classList.add("hover");break;case "mouseout":b.delegate.hoverItemIndex=void 0,b.delegate.hoverItemTaxonomy=void 0,g.style.backgroundColor=p(c(b.appName).coverTagsBgColor,1),f.classList.remove("hover")}}var b=this;if(!this.thumb){var d=document.createElement("div");d.className="gmAlbumsViewFLTagWrap";var e="";this.termData&&(e=this.termData.name);
var g=document.createElement("div");g.className="gmAlbumsViewFLTagCover";g.style.backgroundColor=p(c(b.appName).coverTagsBgColor,1);g.style.color=p(c(b.appName).coverTagsTextColor,1);g.appendChild(document.createTextNode(e));d.appendChild(g);var f=document.createElement("div");f.className="gmAlbumsViewFLTagCoverNnotification";f.appendChild(document.createTextNode(this.termData.count));f.style.backgroundColor=p(c(b.appName).coverTagsBgColor,1);f.style.color=p(c(b.appName).coverTagsTextColor,1);f.style.borderColor=
p(c(b.appName).coverTagsTextColor,1);g.appendChild(f);g.addEventListener("mouseover",a,!1);g.addEventListener("mouseout",a,!1);g.addEventListener("click",a,!1);this.thumb=d}return this.thumb}};ja.prototype={showDescription:function(a){a?(this.coverTitle&&(this.coverTitle.style.transform=new D(1,1,0,this.titleOffset,this.descriptionFrame.y)),this.titleBg.style.transform=new D(this.descriptionFrame.width,this.descriptionFrame.height,0,this.descriptionFrame.x,this.descriptionFrame.y),this.coverDescription&&
(this.coverDescription.style.transition="opacity 0.5s",this.coverDescription.style.transitionDelay="0.4s",this.coverDescription.style.opacity="1")):(this.coverDescription&&(this.coverDescription.style.transition="opacity 0s",this.coverDescription.style.transitionDelay="0s",this.coverDescription.style.opacity="0"),this.coverTitle&&(this.coverTitle.style.transform=new D(1,1,-90,this.titleBgStartFrame.x,this.titleBgStartFrame.y)),this.titleBg.style.transform=new D(this.titleBgStartFrame.height,this.titleBgStartFrame.width,
-90,this.titleBgStartFrame.x,this.thumbnailSize.height))},set minSize(a){this.coverTitle&&(this.titleOffset=Math.min((a.width-this.coverTitle.clientHeight)/2,30))},thumbImgFrameUpdate:function(){if(this.thumbnailSize&&this.thumbImgSize){var a=W(this.thumbImgSize,this.thumbnailSize,!0,!1);this.thumbImg.style.width=a.width+"px";this.thumbImg.style.height=a.height+"px";this.thumbImg.style.left=a.x+"px";this.thumbImg.style.top=a.y+"px"}},set maxSize(a){this.view.style.width=this.imageWrap.style.width=
a.width+"px";this.view.style.height=this.imageWrap.style.height=a.height+"px";this.thumbnailSize=a;this.thumbImg&&this.thumbImgFrameUpdate();this.descriptionFrame.height=0;this.descriptionFrame.width=a.width-this.titleOffset;this.descriptionFrame.y=a.height-this.titleOffset;this.titleBgStartFrame.x=this.titleOffset;this.titleBgStartFrame.y=a.height-this.titleOffset;if(this.coverDescription){this.coverDescription.style.width=a.width-3*this.titleOffset+"px";this.coverDescription.innerHTML=this.termData.description;
a=this.coverDescription;a.innerHTML=a.textContent||a.innerText||"";var b=a.innerHTML,c=a.innerHTML.split(" ");a.innerHTML=c[0].substring(0,3);var e=3*a.clientHeight;for(a.innerHTML=b;a.clientHeight>e;)c.pop(),a.innerHTML=c.join(" ")+" ...";this.descriptionFrame.height=this.coverDescription.clientHeight;this.descriptionFrame.y-=this.coverDescription.clientHeight;this.coverDescription.style.left=this.titleOffset+"px";this.coverDescription.style.top=this.descriptionFrame.y+"px"}this.coverTitle&&(this.descriptionFrame.height+=
this.coverTitle.clientHeight,this.descriptionFrame.y-=this.coverTitle.clientHeight,this.titleBgStartFrame.width=2*this.titleOffset+this.coverTitle.clientWidth,this.titleBgStartFrame.height=this.coverTitle.clientHeight,this.coverTitle.style.transform=new D(1,1,-90,this.titleBgStartFrame.x,this.titleBgStartFrame.y));this.titleBg.style.transform=new D(this.titleBgStartFrame.height,this.titleBgStartFrame.width,-90,this.titleBgStartFrame.x,this.titleBgStartFrame.y)},updateThumbMatrix:function(){this.view.style.transform=
"translateX("+this.thumbTranslateY+"px)"},set frame(a){this.thumbTranslateY=a.x;this.updateThumbMatrix();this.thumbSize=new u(a.width,a.height)},set thumbSize(a){this.imageWrap.style.transform="translateX("+(a.width-this.thumbnailSize.width)/2+"px)"}};ka.prototype={showPreloader:function(a){var b=void 0;if(a)0<this.view.getElementsByClassName("gmAlbumsViewFL_Preloader").length||(b=L(p(c(this.appName).splashPreloaderColor,.7)),this.view.appendChild(b));else if(this.view.getElementsByClassName("gmAlbumsViewFL_Preloader")[0]){var d=
this;b=this.view.getElementsByClassName("gmAlbumsViewFL_Preloader")[0];V(b,function(){d.view&&d.view.removeChild(b)},500)}},preload_covers_status_check:function(){var a=this,b=this.delegate.terms,c=0,e;for(e in b){var g=b[e];g.stLoad==g.loaded&&(c+=1)}Object.keys(b).length==c&&(this.view.style.minHeight=null,a.showPreloader(!1),a.arangeTerms(),setTimeout(function(){a.showContent()},500))},dataReady:function(){function a(a,b){var e=a.itemsList;b.addEventListener("mouseleave",function(b){d.collapseCoverByTaxonomy(a)},
!1);if(e&&0<e.length)for(a.coversList=[],b=0;b<e.length;b++){var f=new ja(e[b],d,a);f.index=b;f.maxSize=new u(d.coverWidth,c(d.appName).coverHeight);a.coversList.push(f);a.view_wrap.appendChild(f.view)}c(d.appName).key||(e=c(d.appName).tv.cloneNode(!0),e.style.top="0px",e.style.left="0px",a.view_wrap.appendChild(e))}var b=this.delegate.terms;if(b){var d=this;this.viewWidth=this.view.clientWidth;this.coverWidth=Math.min(this.view.clientWidth,c(this.appName).coverWidth);c(this.appName).appEventManager.addGMEventListener(r.TERMS_COVER_HANDLER,
this,"coverHandler");for(var e in b){var g=b[e];g.stLoad=0;g.loaded=0;g.taxonomy=e;var f=document.createElement("div");f.className="gm_term_wrap";f.id=e+"_"+this.appName;f.style.height=c(this.appName).coverHeight+"px";this.view.appendChild(f);g.view_wrap=f;switch(e){case "tags":f.style.height=null;f.classList.add("gm_tags");var h=g.itemsList;if(h&&0<h.length){g.coversList=[];for(var l=0;l<h.length;l++){var k=new ia(h[l],this,g);k.index=l;g.coversList.push(k);k=k.view();f.appendChild(k)}this.preload_covers_status_check()}break;
default:a(g,f)}}}},showContent:function(){var a=this.delegate.terms,b;for(b in a)a[b].view_wrap.style.opacity="1"},coverHandler:function(a){var b=a.params.terms_set.itemsList[a.target.index];switch(a.params.type){case "mouseenter":this.expandCoverIndexByTaxonomy(a.target.index,a.params.terms_set);this.touchEvent=!0;break;case "click":this.hoverItemTaxonomy==a.params.terms_set&&this.hoverItemIndex==a.target.index?b&&this.delegate.addCollectioByTerm(b):this.touchEvent||this.expandCoverIndexByTaxonomy(a.target.index,
a.params.terms_set),this.touchEvent=!1}},collapseCoverByTaxonomy:function(a){this.accordionHoverItemIndexForTaxonomyInBox(void 0,a);this.createAndAddSplashNavigationForTaxonomyAndIndex(a);clearTimeout(this.accordingDelay);this.hoverItemIndex=this.hoverItemTaxonomy=void 0},expandCoverIndexByTaxonomy:function(a,b){this.accordionHoverItemIndexForTaxonomyInBox(a,b);this.createAndAddSplashNavigationForTaxonomyAndIndex(b,a,!0)},accordionHoverItemIndexForTaxonomyInBox:function(a,b){if(this.hoverItemTaxonomy!=
b||this.hoverItemIndex!=a){var d=this,e=b.coversList;new u(this.view.clientWidth,c(this.appName).coverHeight);for(var g=this.view.clientWidth/e.length,f=Math.max(d.coverWidth,g),h=0;h<e.length;h++){var l=e[h],k=h*g,n=g;void 0!==a&&(g=1==e.length?0:(this.view.clientWidth-f)/(e.length-1),k=h*g,n=g,h>a&&(k+=f-g),h==a&&(n=f));l.frame=new G(k,0,n,c(this.appName).coverHeight);l.showDescription(!1)}void 0!==a&&e[a].showDescription(!0);clearTimeout(this.accordingDelay);this.accordingDelay=setTimeout(function(){d.hoverItemTaxonomy=
void 0!==a?b:void 0;d.hoverItemIndex=a},200)}},createAndAddSplashNavigationForTaxonomyAndIndex:function(a,b,d){function e(a){switch(a.type){case "mouseenter":this.classList.add("hover");break;case "mouseleave":this.classList.remove("hover");break;case "click":if(this.classList.remove("hover"),f.hoverItemTaxonomy||void 0!==f.hoverItemIndex)a=f.hoverItemIndex,a="next"==this.getAttribute("name")?a+1:a-1,f.expandCoverIndexByTaxonomy(a,f.hoverItemTaxonomy)}}if(1!=a.coversList.length&&!(this.coverWidth<
this.view.clientWidth)){var g=a.view_wrap,f=this;if(!a.navigation){a.navigation={};var h=void 0,l=void 0;switch(a.taxonomy){case "albums":h=c(this.appName).labelForNextButtonAlbum;l=c(this.appName).labelForPrevButtonAlbum;break;case "categories":h=c(this.appName).labelForNextButtonCategory,l=c(this.appName).labelForPrevButtonCategory}a.navigation.nextButton=document.createElement("div");a.navigation.nextButton.setAttribute("name","next");a.navigation.nextButton.className="gmAlbumsViewFLAccordionAlbumCoverPrevNextButton";
var k=document.createElement("div");k.className="gm_icon";k.innerHTML='<svg version="1.1" viewBox="0 0 13.725 22.062" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.125,9.442L4.29,0.607c-0.811-0.811-2.137-0.811-2.945,0L0.607,1.344c-0.81,0.81-0.81,2.136,0,2.944l6.742,6.742  l-6.742,6.742c-0.81,0.81-0.81,2.136,0,2.943l0.737,0.737c0.81,0.811,2.136,0.811,2.945,0l8.835-8.836  c0.435-0.434,0.628-1.017,0.597-1.588C13.753,10.459,13.56,9.876,13.125,9.442z"/></svg>';
k.firstChild.style.fill=c(this.appName).coverTitleTextColor;a.navigation.nextButton.appendChild(k);k=document.createElement("div");k.className="gmAlbumsViewFLAccordionAlbumCoverPrevNextButtonLabel";k.style.color=c(this.appName).coverTitleTextColor;k.style.right="40px";k.innerHTML=h;a.navigation.nextButton.appendChild(k);a.navigation.nextButton.style.right="0";a.navigation.prevButton=document.createElement("div");a.navigation.prevButton.className="gmAlbumsViewFLAccordionAlbumCoverPrevNextButton";a.navigation.prevButton.setAttribute("name",
"prev");k=document.createElement("div");k.className="gm_icon";k.innerHTML='<svg version="1.1" viewBox="0 0 13.725 22.062" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M6.375,11.03l6.742-6.742c0.81-0.809,0.81-2.135,0-2.944L12.38,0.607c-0.81-0.811-2.135-0.811-2.945,0L0.6,9.442  c-0.435,0.434-0.628,1.017-0.597,1.589c-0.031,0.571,0.162,1.154,0.597,1.588l8.835,8.834c0.81,0.811,2.135,0.811,2.945,0  l0.737-0.737c0.81-0.808,0.81-2.134,0-2.943L6.375,11.03z"/></svg>';
k.firstChild.style.fill=c(this.appName).coverTitleTextColor;a.navigation.prevButton.appendChild(k);k=document.createElement("div");k.style.left="40px";k.className="gmAlbumsViewFLAccordionAlbumCoverPrevNextButtonLabel";k.style.color=c(this.appName).coverTitleTextColor;k.innerHTML=l;a.navigation.prevButton.appendChild(k);a.navigation.prevButton.style.left="0px";g.appendChild(a.navigation.nextButton);g.appendChild(a.navigation.prevButton);a.navigation.nextButton.addEventListener("mouseenter",e,!1);a.navigation.nextButton.addEventListener("mouseleave",
e,!1);a.navigation.nextButton.addEventListener("click",e,!1);a.navigation.prevButton.addEventListener("mouseenter",e,!1);a.navigation.prevButton.addEventListener("mouseleave",e,!1);a.navigation.prevButton.addEventListener("click",e,!1)}d?(a.navigation.prevButton.style.visibility=0==b?"hidden":"visible",a.navigation.nextButton.style.visibility=b==a.coversList.length-1?"hidden":"visible"):(a.navigation.nextButton.style.visibility="hidden",a.navigation.prevButton.style.visibility="hidden")}},resizeCollections:function(){var a=
this.delegate.terms,b;for(b in a)if("tags"!=b)for(var d=a[b].coversList,e=this.view.clientWidth/d.length,g=Math.max(this.coverWidth,e),f=0;f<d.length;f++){var h=d[f];h.minSize=new u(e,c(this.appName).coverHeight);h.maxSize=new u(g,c(this.appName).coverHeight)}},arangeTerms:function(){var a=this.delegate.terms;if(a){this.viewWidth=this.view.clientWidth;this.resizeCollections();for(var b in a)"tags"!=b&&this.collapseCoverByTaxonomy(a[b])}},resizeHandler:function(){this.viewWidth!=this.view.clientWidth&&
(this.coverWidth=Math.min(this.view.clientWidth,c(this.appName).coverWidth),this.arangeTerms())}};la.prototype={createTermsList:function(a){this.splashPage=new ka(this);this.appDiv.appendChild(this.splashPage.view);this.splashPage.showPreloader(!0);var b=0,d=[],e=[],g;for(g in a)switch(g){case "album__in":d.push("gmedia_album");e=e.concat(a[g].split(","));b+=c(this.appName).coverHeight+20;break;case "category__in":d.push("gmedia_category");e=e.concat(a[g].split(","));b+=c(this.appName).coverHeight+
20;break;case "tag__in":d.push("gmedia_tag"),e=e.concat(a[g].split(",")),b+=100}this.splashPage.view.style.minHeight=b+"px";c(this.appName).appEventManager.addGMEventListener(r.TERMS_DATA_READY,this,"termsLoaded");J(JSON.stringify({library_terms:{taxonomy:d,include:e}}),this,r.TERMS_DATA_READY)},termsLoaded:function(a){if(a.params||a.params.data)try{var b=JSON.parse(a.params.data);b.key&&""!=b.key?c(this.appName).key=b.key:(c(this.appName).tv=document.createElement("div"),c(this.appName).tv.style.position=
"absolute",c(this.appName).tv.style.height="24px",c(this.appName).tv.innerHTML='<a href="http://bit.ly/2snVAca" style="background-color: rgba(0, 0, 0, 0.8) !important;position: relative !important;left: auto!important;right: auto!important;top: auto!important;bottom: auto!important;width:auto!important;height:auto!important;text-indent:0!important;overflow:visible!important;display:block!important;padding: 4px 10px!important;margin:0 0 -3em 0!important;font-size:14px!important;line-height:120%!important;color:#FFFFFF!important;font-weight:bold!important;visibility:visible!important;opacity:1!important;pointer-events:auto!important;transform:none!important;">Trial version - Gmedia WP Plugin</a>');
for(var d in b){var e;switch(d){case "albums":this.terms.albums={};b.albums.properties&&(this.terms.albums.properties=b.albums.properties);if((e=b.albums.data)&&Array.isArray(e)){this.terms.albums.itemsList=[];for(var g=0;g<e.length;g++){var f=new F(e[g],this.appName);this.terms.albums.itemsList.push(f)}}break;case "categories":this.terms.categories={};b.categories.properties&&(this.terms.categories.properties=b.categories.properties);if((e=b.categories.data)&&Array.isArray(e))for(this.terms.categories.itemsList=
[],g=0;g<e.length;g++)f=new F(e[g],this.appName),this.terms.categories.itemsList.push(f);break;case "tags":if(this.terms.tags={},b.tags.properties&&(this.terms.tags.properties=b.tags.properties),(e=b.tags.data)&&Array.isArray(e))for(this.terms.tags.itemsList=[],g=0;g<e.length;g++)f=new F(e[g],this.appName),this.terms.tags.itemsList.push(f)}}this.addCollectionoFromHash();this.splashPage.dataReady()}catch(h){P(h)}},get termFromHash(){var a=window.location.hash.indexOf(this.appName+"-"),b=void 0;a+1&&
(b=3<=window.location.hash.substr(a).split("-").length?window.location.hash.substr(a).split("-"):void 0);if(b&&0!=Object.keys(this.terms).length){a=b[1];b=b[2];var c=void 0;if(this.terms[a]&&this.terms[a].itemsList)for(var e=0;e<this.terms[a].itemsList.length;e++){var g=this.terms[a].itemsList[e];g.term_id==b&&(c=g,e=this.terms[a].itemsList.length)}return c}},addCollectionoFromHash:function(){var a=this.termFromHash;if(a){window.location.hash="";var b=window.location.href.replace("#","");window.history.replaceState(null,
null,b);this.addCollectioByTerm(a)}},addCollectioByTerm:function(a){a&&(this.createAudioPlayer(),this.currentCollection=new ha(a,this),this.currentLocationCollection=window.location.href,window.history.pushState(null,null,window.location.href),window.history.replaceState(null,null,"#"+this.appName+"-"+a.taxony_type+"-"+a.term_id))},removeCollectionDeepLink:function(a){this.currentLocationCollection==window.location.href?window.history.replaceState(null,null,this.currentLocationCollection):window.history.back()},
removeCollectionHandler:function(a){this.currentCollection&&(this.currentCollection.view&&this.currentCollection.view.parentNode&&this.currentCollection.view.parentNode.removeChild(this.currentCollection.view),document.getElementById("gmAudioPlayer")&&document.getElementById("gmAudioPlayer").pause(),this.currentCollection=void 0)},set likeItem(a){a&&(a.meta.likes||(a.meta.likes=0),a.meta.likes=parseInt(a.meta.likes)+1,a.view&&a.view.like&&(a.view.like=!0),a=a.ID,this.likesSet[a]||(this.likesSet[a]=
"like",this.viewsSet[a]&&delete this.viewsSet[a],a=JSON.stringify({counter:{likes:[a],views:[a]}}),J(a,this,r.COUNTERS_UPDATED),window.localStorage.setItem("gm_likesSet",JSON.stringify(this.likesSet))))},set viewItem(a){var b=a.ID;this.updateItemLink(a);this.viewsSet[b]="view"},itemsCountersUpdate:function(){if(this.viewsSet){var a=[];for(key in this.viewsSet)a.push(key);0<a.length&&(a=JSON.stringify({counter:{likes:[],views:a}}),J(a,this,r.COUNTERS_UPDATED),this.viewsSet={})}},itemsCountersUpdateHandler:function(a){window.localStorage.setItem("gm_likesSet",
JSON.stringify(this.likesSet))},createLightbox:function(a){if(a.params||a.params.collection){var b=a.params.collection;a=a.params.index;this.slider&&this.slider.prepareToRemove();window.localStorage.getItem("gm_likesSet")&&(this.likesSet=JSON.parse(window.localStorage.getItem("gm_likesSet")));this.slider=new da(this);this.slider.initByList(b.filteredCollection,a);this.currentLocationSlider=window.location.href;window.history.pushState(null,null,window.location.href)}},updateItemLink:function(a){window.history.replaceState(null,
null,a.sharelink)},removeLightbox:function(a){var b=this,c=a.target;setTimeout(function(){c.view&&c.view.parentNode&&c.view.parentNode.removeChild(c.view);b.slider&&(b.slider=void 0)},400);this.currentLocationSlider==window.location.href?window.history.replaceState(null,null,this.currentLocationSlider):window.history.back()},createModal:function(a){if(a.params.type&&a.params.item)switch(a.params.type){case "share":this.modal||(this.modal=new R(this));this.modal.type=a.params.type;a=a.params.item;
a=new qa(this.appName,this.modal,a,a.sharelink);this.modal.pushPage(a);break;case "info":this.modal||(this.modal=new R(this)),this.modal.type=a.params.type,a=a.params.item,a=new pa(this.appName,this.modal,a),this.modal.pushPage(a)}},deleteModal:function(){this.modal&&delete this.modal},windowResizeHandler:function(a){this.splashPage&&this.splashPage.resizeHandler();this.currentCollection&&this.currentCollection.resizeHandler();this.slider&&this.slider.resizeHandler()},createAudioPlayer:function(){var a=
document.getElementById("gmAudioPlayer")?document.getElementById("gmAudioPlayer"):new Audio;if(null!=a&&a.canPlayType&&a.canPlayType("audio/mpeg")){var b=function(a){};a.id="gmAudioPlayer";a.setAttribute("type","audio/mpeg");a.setAttribute("codecs","mp3");this.audioPlayer=a;this.appDiv.appendChild(this.audioPlayer);a.addEventListener("ended",b,!1);a.addEventListener("pause",b,!1);a.addEventListener("play",b,!1);a.addEventListener("durationchange",b,!1)}}};(function(){var a=function(b){window.removeEventListener("mousedown",
a,!1);window.removeEventListener("touchstart",a,!1);"touchstart"==b.type?(b.stopPropagation(),N=!1):N=!0};window.addEventListener("mousedown",a,!1);window.addEventListener("touchstart",a,!1);A=500>window.screen.height||500>window.screen.width;for(var b=document.body.getElementsByClassName("albumsview2_module"),c=0;c<b.length;c++){var e=b[c].id;this[e]=new la(this[e],e,b[c])}})()}codeasily_albumsView2_module();
